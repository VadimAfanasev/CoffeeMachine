[2023-10-16 00:15:45.649 +07:00  INF]  User profile is available. Using 'C:\Users\Вадим\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 00:16:11.950 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/order/Cappuccino - -
[2023-10-16 00:16:11.977 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 00:16:12.020 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 00:16:12.041 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 00:16:12.048 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 3.4189ms
[2023-10-16 00:16:12.050 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 00:16:12.067 +07:00  ERR]  Constant value of type 'Moq.Mock`1[CoffeeMachine.Services.Interfaces.ICoffeeBuyServices]' can't be converted to service type 'CoffeeMachine.Services.Interfaces.ICoffeeBuyServices'
[2023-10-16 00:16:12.089 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/order/Cappuccino - - - 400 - application/json;+charset=utf-8 140.6140ms
[2023-10-16 09:51:14.525 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 09:51:14.628 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/order/Cappuccino - -
[2023-10-16 09:51:14.649 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 09:51:15.241 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 09:51:15.285 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 09:51:15.323 +07:00  INF]  Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
[2023-10-16 09:51:15.337 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 48.7417ms
[2023-10-16 09:51:15.337 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 09:51:15.340 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/order/Cappuccino - - - 415 - application/problem+json;+charset=utf-8 712.6954ms
[2023-10-16 09:52:07.677 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 09:52:26.376 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/order/Cappuccino - -
[2023-10-16 09:52:26.403 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 09:52:26.443 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 09:52:26.462 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 09:52:26.483 +07:00  INF]  Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
[2023-10-16 09:52:26.496 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 30.2113ms
[2023-10-16 09:52:26.497 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 09:52:26.505 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/order/Cappuccino - - - 415 - application/problem+json;+charset=utf-8 124.4175ms
[2023-10-16 09:53:28.220 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 09:53:31.358 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/order/Cappuccino - -
[2023-10-16 09:53:31.387 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 09:53:31.428 +07:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-10-16 09:53:31.428 +07:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-10-16 09:53:31.432 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/order/Cappuccino - - - 405 - - 74.7276ms
[2023-10-16 10:02:04.237 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:02:14.452 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/order/Cappuccino - -
[2023-10-16 10:02:14.478 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:02:14.518 +07:00  INF]  Executing endpoint '405 HTTP Method Not Supported'
[2023-10-16 10:02:14.518 +07:00  INF]  Executed endpoint '405 HTTP Method Not Supported'
[2023-10-16 10:02:14.522 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/order/Cappuccino - - - 405 - - 71.5194ms
[2023-10-16 10:13:17.063 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:13:17.142 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:13:17.183 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:13:17.232 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:13:17.255 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:13:17.377 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:13:17.386 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.3931ms.
[2023-10-16 10:13:17.390 +07:00  INF]  Executing OkObjectResult, writing value of type 'null'.
[2023-10-16 10:13:17.393 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 135.4131ms
[2023-10-16 10:13:17.393 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:13:17.397 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 204 - - 256.2190ms
[2023-10-16 10:14:43.448 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:14:43.548 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:14:43.580 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:14:43.626 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:14:43.653 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:14:43.725 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:14:43.736 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.5323ms.
[2023-10-16 10:14:43.741 +07:00  INF]  Executing OkObjectResult, writing value of type 'null'.
[2023-10-16 10:14:43.745 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 88.5055ms
[2023-10-16 10:14:43.745 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:14:43.749 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 204 - - 202.6677ms
[2023-10-16 10:15:30.362 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:15:30.456 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:15:30.491 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:15:30.529 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:15:30.554 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:15:30.630 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:16:46.720 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:16:46.813 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:16:46.843 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:16:46.882 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:16:46.906 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:16:46.974 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:34:45.808 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:34:45.890 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:34:45.920 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:34:45.963 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:34:45.985 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:34:47.044 +07:00  INF]  Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 10:34:47.165 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 10:34:47.178 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 10:34:47.246 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:34:56.280 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 10:35:04.729 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:35:14.186 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 10:35:21.097 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:21.118 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:21.168 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 10:35:22.114 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:22.125 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:22.126 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:22.127 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:35:22.129 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 10:35:23.094 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:35:23.124 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 10:35:31.834 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44585.6115ms.
[2023-10-16 10:35:31.840 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 10:35:33.197 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 47208.839ms
[2023-10-16 10:35:33.197 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:36:16.478 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 90587.9574ms
[2023-10-16 10:37:58.885 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:37:58.958 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:37:58.982 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:37:59.029 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:37:59.058 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:37:59.840 +07:00  INF]  Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 10:37:59.971 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 10:37:59.985 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 10:38:00.052 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 10:38:01.818 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 10:38:01.831 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:38:01.865 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 10:38:01.905 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.912 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.968 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 10:38:01.986 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.987 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.988 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.989 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:38:01.991 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 10:38:02.009 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:38:02.030 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 10:38:04.212 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4155.4668ms.
[2023-10-16 10:38:04.218 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 10:38:04.232 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 5170.1421ms
[2023-10-16 10:38:04.232 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:38:31.251 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 32287.2508ms
[2023-10-16 10:41:13.349 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:41:13.403 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:41:13.422 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:41:13.439 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:41:13.454 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:41:14.024 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 10:41:14.134 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 10:41:14.146 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 10:41:14.198 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 10:41:14.211 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:41:14.241 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 10:41:14.275 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.280 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.325 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 10:41:14.340 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.341 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.341 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.342 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:41:14.343 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 10:41:14.368 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:41:14.386 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 10:41:14.391 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 10:41:14.403 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 945.5468ms
[2023-10-16 10:41:14.403 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:41:14.410 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1008.4012ms
[2023-10-16 10:56:29.563 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 10:56:29.617 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 10:56:29.637 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 10:56:29.654 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:56:29.669 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 10:56:30.242 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 10:56:30.352 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 10:56:30.365 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 10:56:30.418 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 10:56:30.430 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:56:30.464 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 10:56:30.498 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.500 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.545 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 10:56:30.558 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.558 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.559 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.559 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 10:56:30.561 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 10:56:30.585 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 10:56:30.632 +07:00  INF]  Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 10:56:30.637 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 10:56:30.649 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 977.322ms
[2023-10-16 10:56:30.649 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 10:56:30.656 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1039.9239ms
[2023-10-16 11:02:36.471 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:02:36.545 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 11:02:36.570 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:02:36.621 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:02:36.650 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:02:37.375 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:02:37.498 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:02:37.511 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:02:37.576 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 11:02:45.516 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:02:48.319 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 11665.7109ms
[2023-10-16 11:02:48.322 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:02:53.439 +07:00  ERR]  Invalid coffee type
[2023-10-16 11:03:08.369 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 31824.9344ms
[2023-10-16 11:10:57.971 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:10:58.044 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 9
[2023-10-16 11:10:58.064 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:10:58.081 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:10:58.096 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:10:58.781 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:10:58.891 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:10:58.903 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:10:58.956 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:10:58.960 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 861.3252ms
[2023-10-16 11:10:58.961 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:10:58.962 +07:00  ERR]  Invalid banknotes type
[2023-10-16 11:10:58.980 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 9 - 400 - application/json;+charset=utf-8 936.7286ms
[2023-10-16 11:11:14.210 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:11:14.264 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 11:11:14.283 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:11:14.300 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:14.315 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:11:14.884 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:11:14.995 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:11:15.007 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:11:15.059 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:11:15.072 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:15.077 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 758.8853ms
[2023-10-16 11:11:15.077 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:15.078 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 11:11:15.097 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 834.4477ms
[2023-10-16 11:11:38.105 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:11:38.160 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 11:11:38.179 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:11:38.196 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:38.212 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:11:38.776 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:11:38.888 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:11:38.901 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:11:38.953 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:11:38.957 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 743.0538ms
[2023-10-16 11:11:38.958 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:38.959 +07:00  ERR]  Invalid coffee type
[2023-10-16 11:11:38.977 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 818.6856ms
[2023-10-16 11:11:38.982 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 11:11:38.984 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:38.985 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:11:39.023 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:11:39.025 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:11:39.025 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:11:39.028 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:11:39.041 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:39.042 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 57.7547ms
[2023-10-16 11:11:39.042 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:39.043 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 11:11:39.043 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 60.9973ms
[2023-10-16 11:11:39.045 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:11:39.046 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:39.046 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:11:39.118 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:11:39.119 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:11:39.119 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:11:39.121 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:11:39.122 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:39.156 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:11:39.190 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.191 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.238 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:11:39.253 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.253 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.254 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.254 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.255 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.255 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:39.256 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:11:39.279 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:39.324 +07:00  INF]  Executed DbCommand (29ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:11:39.328 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:11:39.332 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 285.6247ms
[2023-10-16 11:11:39.332 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:39.333 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 288.1015ms
[2023-10-16 11:11:48.094 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:11:48.148 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:11:48.167 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:11:48.184 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:48.199 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:11:48.766 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:11:48.877 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:11:48.890 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:11:48.946 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:11:48.959 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:48.993 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:11:49.027 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.030 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.075 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:11:49.088 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.089 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.089 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.090 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.090 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.090 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:11:49.092 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:11:49.096 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:11:49.114 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:11:49.119 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:11:49.131 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 928.6424ms
[2023-10-16 11:11:49.131 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:11:49.138 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 991.5532ms
[2023-10-16 11:12:23.426 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:12:23.482 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:12:23.502 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:12:23.519 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:12:23.534 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:12:24.095 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:12:24.208 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:12:24.220 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:12:24.273 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:12:24.285 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:12:24.318 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:12:24.352 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.355 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.399 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:12:24.413 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.413 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.414 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.414 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.415 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.415 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:12:24.416 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:12:24.421 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:12:24.467 +07:00  INF]  Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:12:24.472 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:12:24.484 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 947.4272ms
[2023-10-16 11:12:24.485 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:12:24.491 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1010.4587ms
[2023-10-16 11:13:25.987 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:13:26.041 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:13:26.061 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:13:26.077 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:13:26.093 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:13:26.667 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:13:26.777 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:13:26.789 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:13:26.841 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:13:26.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:13:26.883 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:13:26.918 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.923 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.968 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:13:26.981 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.982 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.982 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.983 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.983 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.983 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:13:26.985 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:13:27.006 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:13:27.053 +07:00  INF]  Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:13:27.057 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:13:27.069 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 973.448ms
[2023-10-16 11:13:27.069 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:13:27.076 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1036.6660ms
[2023-10-16 11:14:06.589 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:14:06.643 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:14:06.662 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:14:06.679 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:14:06.694 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:14:07.266 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:14:07.376 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:14:07.388 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:14:07.441 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:14:07.454 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:14:07.489 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:14:07.522 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.525 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.569 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:14:07.583 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.583 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.584 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.584 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.585 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.585 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:14:07.586 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:14:07.607 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:14:07.653 +07:00  INF]  Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:14:07.658 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:14:07.669 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 972.9178ms
[2023-10-16 11:14:07.670 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:14:07.677 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1035.0880ms
[2023-10-16 11:15:03.043 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:15:03.097 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:15:03.117 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:15:03.134 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:03.149 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:15:03.739 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:15:03.852 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:15:03.865 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:15:03.919 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:15:03.931 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:03.965 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:15:03.999 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.002 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.047 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:04.061 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.062 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.062 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.063 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.063 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.064 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:04.065 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:15:04.089 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:04.136 +07:00  INF]  Executed DbCommand (31ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:15:04.142 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:15:04.155 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 1002.9448ms
[2023-10-16 11:15:04.155 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:04.163 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1066.7833ms
[2023-10-16 11:15:15.841 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:15:15.895 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:15:15.914 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:15:15.931 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:15.947 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:15:16.512 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:15:16.623 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:15:16.636 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:15:16.690 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:15:16.703 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:16.738 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:15:16.771 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.774 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.819 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:16.833 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.833 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.834 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.834 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.834 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.835 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:16.836 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 11:15:16.840 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:16.858 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:15:16.862 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:15:16.874 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 925.0613ms
[2023-10-16 11:15:16.875 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:16.882 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 988.2224ms
[2023-10-16 11:15:38.220 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:15:38.278 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:15:38.298 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:15:38.315 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:38.330 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:15:38.911 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:15:39.027 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:15:39.040 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:15:39.094 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:15:39.107 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:39.141 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:15:39.175 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.178 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.223 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:39.241 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.242 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.242 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.243 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.243 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.243 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.244 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:39.245 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:39.249 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:39.267 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:15:39.272 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:15:39.283 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 950.067ms
[2023-10-16 11:15:39.283 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:39.290 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1013.5515ms
[2023-10-16 11:15:43.871 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:15:43.927 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:15:43.947 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:15:43.965 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:43.980 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:15:44.552 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:15:44.666 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:15:44.679 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:15:44.735 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:15:44.748 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:44.783 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:15:44.816 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.819 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.865 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:44.879 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.879 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.880 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.880 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.880 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.881 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.881 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:44.882 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:44.887 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:44.904 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:15:44.909 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:15:44.920 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 936.5441ms
[2023-10-16 11:15:44.920 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:44.927 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1001.6501ms
[2023-10-16 11:15:48.075 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:15:48.133 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:15:48.153 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:15:48.170 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:48.186 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:15:48.752 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:15:48.865 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:15:48.878 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:15:48.934 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:15:48.947 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:48.982 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:15:49.016 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.019 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.064 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:49.078 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.079 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.079 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.080 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.080 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.081 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.081 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:15:49.082 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:15:49.087 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:15:49.104 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:15:49.111 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:15:49.122 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 933.2411ms
[2023-10-16 11:15:49.122 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:15:49.129 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 997.3598ms
[2023-10-16 11:17:03.835 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:17:03.911 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:17:03.942 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:17:03.984 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:17:04.015 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:17:04.722 +07:00  INF]  Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:17:04.860 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:17:04.874 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:17:05.010 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 11:17:07.989 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:17:21.175 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:17:42.634 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:18:16.778 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:18:16.833 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:18:16.852 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:18:16.869 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:18:16.885 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:18:17.463 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:18:17.577 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:18:17.589 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:18:17.645 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:18:17.657 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:18:17.693 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:18:17.728 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.731 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.778 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:18:17.792 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.792 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.793 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.793 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.794 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.794 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.794 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:18:17.795 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:18:17.822 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:18:17.840 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:18:17.845 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:18:17.856 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 968.5577ms
[2023-10-16 11:18:17.856 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:18:17.864 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1032.2942ms
[2023-10-16 11:20:23.625 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:20:23.679 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:20:23.698 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:20:23.714 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:23.729 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:20:24.298 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:20:24.408 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:20:24.421 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:20:24.473 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:20:24.485 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:24.514 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:20:24.549 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.553 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.598 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:24.611 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.612 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.612 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.612 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.613 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.613 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.613 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:24.614 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:24.639 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:24.656 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:20:24.661 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:20:24.672 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 940.2224ms
[2023-10-16 11:20:24.673 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:24.679 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1002.2852ms
[2023-10-16 11:20:42.160 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:20:42.215 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:20:42.234 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:20:42.252 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:42.267 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:20:42.946 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:20:43.056 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:20:43.068 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:20:43.122 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:20:43.134 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:43.168 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:20:43.206 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.209 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.254 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:43.268 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.269 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.269 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.269 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.270 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.270 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.271 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.271 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.271 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.272 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.272 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.272 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.273 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.273 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.273 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.274 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.274 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.275 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.275 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:43.293 +07:00  INF]  Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 11:20:43.297 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:43.315 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:20:43.320 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:20:43.331 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 1061.3118ms
[2023-10-16 11:20:43.331 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:43.338 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1124.8931ms
[2023-10-16 11:20:51.865 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:20:51.920 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:20:51.939 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:20:51.956 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:51.971 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:20:52.532 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:20:52.642 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:20:52.655 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:20:52.708 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:20:52.720 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:52.755 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:20:52.789 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.792 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.837 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:52.851 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.852 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.852 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.852 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.854 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:52.855 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:52.859 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:52.877 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:20:52.881 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:20:52.893 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 918.7469ms
[2023-10-16 11:20:52.893 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:52.900 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 981.8295ms
[2023-10-16 11:20:56.028 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:20:56.082 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:20:56.103 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:20:56.122 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:56.138 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:20:56.808 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:20:56.919 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:20:56.932 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:20:56.985 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:20:56.997 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:57.029 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:20:57.066 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.071 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.115 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:57.129 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.130 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.130 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.130 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.131 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.131 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.132 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:20:57.133 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:20:57.138 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:20:57.156 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:20:57.161 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:20:57.172 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 1031.0748ms
[2023-10-16 11:20:57.172 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:20:57.179 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1098.5427ms
[2023-10-16 11:22:09.007 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:22:09.083 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:22:09.113 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:22:09.153 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:22:09.175 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:22:09.910 +07:00  INF]  Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:22:10.058 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:22:10.073 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:22:10.167 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 11:22:31.359 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:22:31.373 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:22:31.408 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:22:31.454 +07:00  INF]  Executed DbCommand (13ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.465 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.517 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:22:31.535 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.537 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.538 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.539 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.540 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.541 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.542 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:22:31.544 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:22:31.550 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:22:31.570 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:22:34.468 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24297.692ms.
[2023-10-16 11:22:34.474 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:22:34.487 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 25308.7097ms
[2023-10-16 11:22:34.488 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:22:34.496 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 25413.9703ms
[2023-10-16 11:23:06.027 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:23:06.081 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:23:06.100 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:23:06.117 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:06.131 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:23:06.793 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:23:06.904 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:23:06.916 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:23:06.968 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:23:06.980 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:23:07.010 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:23:07.044 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.049 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.094 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:23:07.107 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.107 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.108 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.108 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.109 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.109 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.109 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:07.110 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:23:07.134 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:23:07.153 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:23:07.157 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:23:07.169 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 1034.5855ms
[2023-10-16 11:23:07.169 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:07.176 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1096.8024ms
[2023-10-16 11:23:39.591 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:23:39.644 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 11:23:39.664 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:23:39.680 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:39.695 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:23:40.262 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:23:40.372 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:23:40.383 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:23:40.435 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:23:40.439 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 740.8949ms
[2023-10-16 11:23:40.439 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:40.441 +07:00  ERR]  Invalid coffee type
[2023-10-16 11:23:40.458 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 815.0865ms
[2023-10-16 11:23:46.377 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:23:46.431 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:23:46.450 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:23:46.467 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:46.482 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:23:47.041 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:23:47.150 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:23:47.162 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:23:47.216 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:23:47.228 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:23:47.263 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:23:47.298 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.301 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.347 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:23:47.361 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.362 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.362 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.362 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.363 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.363 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.364 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:23:47.365 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:23:47.384 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:23:47.402 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:23:47.406 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:23:47.418 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 933.2213ms
[2023-10-16 11:23:47.418 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:23:47.425 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 995.7336ms
[2023-10-16 11:24:02.703 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:24:02.756 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 11:24:02.776 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:24:02.793 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:24:02.807 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:24:03.372 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:24:03.483 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:24:03.496 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:24:03.550 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:24:03.563 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:24:03.568 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 757.5944ms
[2023-10-16 11:24:03.568 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:24:03.569 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 11:24:03.588 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 833.1824ms
[2023-10-16 11:41:36.897 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:41:36.952 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:41:36.971 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:41:36.988 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:41:37.003 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:41:37.577 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:41:37.691 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:41:37.703 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:41:37.758 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:41:37.770 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:41:37.805 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:41:37.838 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.841 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.885 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:41:37.898 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.899 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.899 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.900 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.900 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.900 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.901 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:41:37.902 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:41:37.928 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:41:37.946 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:41:37.950 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:41:37.961 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 955.6303ms
[2023-10-16 11:41:37.962 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:41:37.969 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1018.4782ms
[2023-10-16 11:41:57.177 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:41:58.301 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:41:58.330 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:41:58.367 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:41:58.388 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:41:59.092 +07:00  INF]  Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:41:59.231 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:41:59.245 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:41:59.312 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 11:42:03.023 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:42:18.461 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:42:36.076 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:46:56.221 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:46:56.275 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:46:56.294 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:46:56.311 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:46:56.326 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:46:56.890 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:46:56.999 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:46:57.011 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:46:57.063 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:46:57.075 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:46:57.105 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:46:57.140 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.144 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.189 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:46:57.203 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.203 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.204 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.204 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.204 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.205 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.205 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:46:57.206 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:46:57.231 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:46:57.249 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:46:57.253 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:46:57.265 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 936.2981ms
[2023-10-16 11:46:57.265 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:46:57.272 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 998.5655ms
[2023-10-16 11:47:16.034 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:47:16.091 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:47:16.112 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:47:16.129 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:47:16.144 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:47:16.706 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:47:16.815 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:47:16.827 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:47:16.879 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:47:16.891 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:47:16.921 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:47:16.956 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:16.961 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.005 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:47:17.024 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.025 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.025 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.026 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.026 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.027 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.027 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:47:17.028 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:47:17.032 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:47:17.050 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:47:17.054 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:47:17.065 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 919.0198ms
[2023-10-16 11:47:17.066 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:47:17.073 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 983.2707ms
[2023-10-16 11:47:38.913 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:47:45.266 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:47:45.294 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:47:45.332 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:47:45.353 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:47:46.002 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:47:46.122 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:47:46.135 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:47:46.196 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 11:47:47.774 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:47:50.224 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:48:07.823 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 11:55:15.622 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:55:15.676 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 11:55:15.695 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:55:15.712 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:55:15.727 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:55:16.285 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:55:16.394 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:55:16.407 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:55:16.459 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:55:16.471 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:55:16.501 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 11:55:16.536 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.540 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.586 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:55:16.599 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.600 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.600 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.600 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.601 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.601 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.602 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 11:55:16.603 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 11:55:16.626 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:55:16.644 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 11:55:16.648 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 11:55:16.659 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 929.7148ms
[2023-10-16 11:55:16.660 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:55:16.666 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 991.9283ms
[2023-10-16 11:55:51.923 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 11:55:51.977 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 11:55:51.996 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 11:55:52.013 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:55:52.028 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 11:55:52.588 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 11:55:52.698 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 11:55:52.710 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 11:55:52.766 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 11:55:52.778 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 11:55:52.782 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 751.8802ms
[2023-10-16 11:55:52.783 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 11:55:52.784 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 11:55:52.802 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 826.2375ms
[2023-10-16 12:01:58.304 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:01:58.388 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:01:58.432 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:01:58.478 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:01:58.500 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:01:58.555 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 12:01:58.587 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.809ms.
[2023-10-16 12:01:58.592 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:01:58.600 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 97.7445ms
[2023-10-16 12:01:58.600 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:01:58.609 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 222.6219ms
[2023-10-16 12:03:33.349 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:03:33.403 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:03:33.422 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:03:33.438 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:03:33.453 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:03:33.491 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:03:33.498 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 42.8099ms
[2023-10-16 12:03:33.499 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:03:33.502 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 100.5211ms
[2023-10-16 12:04:17.826 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:04:17.947 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 40
[2023-10-16 12:04:17.985 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:04:18.032 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:04:18.062 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:04:18.128 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 12:04:28.275 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 10208.5588ms
[2023-10-16 12:04:28.276 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:04:28.316 +07:00  ERR]  User not found
[2023-10-16 12:04:28.329 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 40 - 404 - application/json;+charset=utf-8 10384.0296ms
[2023-10-16 12:05:45.210 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:05:45.263 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:05:45.283 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:05:45.299 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:05:45.314 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:05:45.351 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:05:45.358 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 41.5354ms
[2023-10-16 12:05:45.359 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:05:45.361 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 99.0811ms
[2023-10-16 12:05:52.963 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:05:53.018 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 40
[2023-10-16 12:05:53.037 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:05:53.054 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:05:53.069 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:05:53.091 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.7814ms
[2023-10-16 12:05:53.092 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:05:53.094 +07:00  ERR]  User not found
[2023-10-16 12:05:53.104 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 40 - 404 - application/json;+charset=utf-8 87.6058ms
[2023-10-16 12:07:14.737 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:07:14.827 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:07:14.860 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:07:14.909 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:07:14.939 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:07:15.003 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 12:07:15.039 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.7402ms.
[2023-10-16 12:07:15.045 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:07:15.053 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 111.6693ms
[2023-10-16 12:07:15.054 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:07:15.063 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 237.1654ms
[2023-10-16 12:10:24.004 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:10:24.058 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:10:24.078 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:10:24.095 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:10:24.110 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:10:24.149 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:10:24.156 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 43.0106ms
[2023-10-16 12:10:24.157 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:10:24.159 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 102.2315ms
[2023-10-16 12:11:28.090 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:11:28.145 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 12:11:28.164 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:11:28.182 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:11:28.197 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:11:28.219 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.9381ms
[2023-10-16 12:11:28.221 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:11:28.223 +07:00  ERR]  User not found
[2023-10-16 12:11:28.234 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 90.2791ms
[2023-10-16 12:12:07.714 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:12:07.823 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 12:12:07.871 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:12:07.920 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:12:07.944 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:12:08.007 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 12:12:17.428 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 9481.3397ms
[2023-10-16 12:12:17.429 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:12:27.528 +07:00  ERR]  User not found
[2023-10-16 12:12:35.754 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 27933.3203ms
[2023-10-16 12:15:59.165 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:15:59.219 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 12:15:59.239 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:15:59.256 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:15:59.271 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:15:59.309 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 12:15:59.316 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 42.3652ms
[2023-10-16 12:15:59.317 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:15:59.319 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 101.3165ms
[2023-10-16 12:16:03.212 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:16:03.266 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 12:16:03.286 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:16:03.303 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:16:03.318 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 12:16:03.340 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.5549ms
[2023-10-16 12:16:03.341 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 12:16:03.343 +07:00  ERR]  User not found
[2023-10-16 12:16:03.353 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 88.4247ms
[2023-10-16 12:25:52.539 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:25:52.641 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52
[2023-10-16 12:25:52.680 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:25:52.733 +07:00  INF]  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2023-10-16 12:25:52.736 +07:00  INF]  AuthenticationScheme: Bearer was challenged.
[2023-10-16 12:25:52.740 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52 - 401 - - 101.3228ms
[2023-10-16 12:27:29.819 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 12:27:46.396 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52
[2023-10-16 12:27:46.425 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 12:27:46.467 +07:00  INF]  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2023-10-16 12:27:46.470 +07:00  INF]  AuthenticationScheme: Bearer was challenged.
[2023-10-16 12:27:46.473 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52 - 401 - - 79.1391ms
[2023-10-16 14:16:43.199 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:16:51.247 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52
[2023-10-16 14:16:51.270 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:16:51.282 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:16:51.304 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:16:51.968 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:16:52.098 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:16:52.106 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:16:52.172 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:16:52.208 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:16:52.211 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:16:52.246 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:16:52.280 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:16:52.335 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:16:52.353 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 178.82ms.
[2023-10-16 14:16:52.358 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 14:16:52.367 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 1060.3177ms
[2023-10-16 14:16:52.367 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:19:02.271 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 52 - 200 - text/plain;+charset=utf-8 131022.8696ms
[2023-10-16 14:19:34.774 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:19:34.832 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56
[2023-10-16 14:19:34.851 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:19:34.862 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:19:34.877 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:19:35.447 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:19:35.563 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:19:35.571 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:19:35.627 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:19:35.629 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:19:35.660 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:19:35.688 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:19:35.736 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:19:35.753 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 14:19:35.760 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 880.3759ms
[2023-10-16 14:19:35.761 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:19:35.767 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56 - 200 - text/plain;+charset=utf-8 936.9218ms
[2023-10-16 14:19:52.001 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:19:52.056 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 14:19:52.076 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:19:52.085 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 14:19:52.100 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 14:19:52.677 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:19:52.792 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:19:52.805 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:19:52.861 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 14:19:52.874 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 14:19:52.909 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 14:19:52.944 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:52.947 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:52.993 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:19:53.007 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:53.008 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:53.008 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:53.008 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:53.009 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:19:53.010 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:19:53.014 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 14:19:53.032 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 14:19:53.040 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 14:19:53.051 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 948.334ms
[2023-10-16 14:19:53.052 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 14:19:53.059 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 1004.4846ms
[2023-10-16 14:20:35.616 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:20:35.674 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 111
[2023-10-16 14:20:35.693 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:20:35.704 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:20:35.719 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:20:36.309 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:20:36.428 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:20:36.435 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:20:36.491 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:20:36.494 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:20:36.494 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:20:36.495 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:20:36.525 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:20:36.555 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:20:36.558 +07:00  ERR]  Failed executing DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:20:36.563 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:20:36.564 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:20:36.572 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 849.9467ms
[2023-10-16 14:20:36.573 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:20:36.575 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 14:20:36.591 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 111 - 404 - application/json;+charset=utf-8 918.7547ms
[2023-10-16 14:21:10.589 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:21:10.649 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 111
[2023-10-16 14:21:10.669 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:21:10.680 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:10.694 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:21:11.255 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:21:11.372 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:21:11.379 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:21:11.434 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:11.437 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:11.437 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:11.437 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:11.471 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:11.502 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:11.510 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:21:11.512 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:11.518 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 821.2181ms
[2023-10-16 14:21:11.519 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:11.521 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 14:21:11.538 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 111 - 404 - application/json;+charset=utf-8 890.1283ms
[2023-10-16 14:21:31.156 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:21:31.214 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 83
[2023-10-16 14:21:31.234 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:21:31.245 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:31.259 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:21:31.852 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:21:31.969 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:21:31.977 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:21:32.031 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:32.034 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:32.034 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:32.065 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:32.094 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:32.097 +07:00  ERR]  Failed executing DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:32.102 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:21:32.103 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:21:32.107 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 845.734ms
[2023-10-16 14:21:32.108 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:32.109 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 14:21:32.125 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 83 - 404 - application/json;+charset=utf-8 912.7877ms
[2023-10-16 14:21:47.195 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:21:47.253 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56
[2023-10-16 14:21:47.272 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:21:47.283 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:47.298 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:21:47.874 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:21:47.991 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:21:47.998 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:21:48.051 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:48.054 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:21:48.088 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:21:48.096 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 14:21:48.121 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 820.3738ms
[2023-10-16 14:21:48.121 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:21:48.123 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 14:21:48.140 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56 - 404 - application/json;+charset=utf-8 888.0308ms
[2023-10-16 14:22:02.378 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:22:06.587 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56
[2023-10-16 14:22:06.616 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:22:06.629 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:22:06.650 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:22:07.324 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:22:07.455 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:22:07.463 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:22:07.530 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:22:07.568 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:22:07.571 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:22:07.605 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:22:07.639 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:22:07.693 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:22:07.712 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 179.0101ms.
[2023-10-16 14:22:07.717 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 14:22:07.726 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 1072.805ms
[2023-10-16 14:22:07.726 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:22:15.937 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56 - 200 - text/plain;+charset=utf-8 9351.7578ms
[2023-10-16 14:22:29.543 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:22:29.600 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56
[2023-10-16 14:22:29.620 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:22:29.631 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:22:29.646 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:22:30.324 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:22:30.444 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:22:30.452 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:22:30.506 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:22:30.508 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:22:30.539 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:22:30.569 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:22:30.616 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:22:30.633 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 14:22:30.640 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 991.8562ms
[2023-10-16 14:22:30.641 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:22:30.647 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 56 - 200 - text/plain;+charset=utf-8 1048.1968ms
[2023-10-16 14:32:42.072 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:32:42.131 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 14:32:42.150 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:32:42.161 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:32:42.176 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:32:42.754 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:32:42.872 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:32:42.879 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:32:42.934 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:32:42.936 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:32:42.967 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:32:42.997 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 14:32:43.048 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:32:43.065 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 14:32:43.072 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 893.5373ms
[2023-10-16 14:32:43.073 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:32:43.080 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 950.4887ms
[2023-10-16 14:36:14.084 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:36:16.750 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 14:36:16.779 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:36:16.792 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:36:16.815 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:36:17.498 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:36:17.627 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:36:17.635 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:36:17.711 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:36:17.759 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:36:17.805 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 986.6038ms
[2023-10-16 14:36:17.806 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:36:17.820 +07:00  ERR]  Invalid banknotes type
[2023-10-16 14:36:58.160 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:36:58.219 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 14:36:58.238 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:36:58.249 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:36:58.264 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:36:58.860 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:36:58.977 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:36:58.984 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:36:59.038 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:36:59.042 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 775.5742ms
[2023-10-16 14:36:59.043 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:36:59.044 +07:00  ERR]  Invalid banknotes type
[2023-10-16 14:36:59.060 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 843.1317ms
[2023-10-16 14:40:26.299 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:40:26.346 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 14:40:26.364 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:40:26.375 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:40:26.386 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:40:26.969 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:40:27.081 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:40:27.093 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:40:27.130 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 14:40:27.166 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 14:40:27.183 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 795.01ms
[2023-10-16 14:40:27.184 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:40:27.190 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 845.3830ms
[2023-10-16 14:40:50.979 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:40:51.049 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 14:40:51.083 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:40:51.098 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:40:51.123 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:40:51.861 +07:00  INF]  Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:40:51.990 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:40:51.998 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:40:52.044 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:40:52.081 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 14:40:52.117 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.5885ms.
[2023-10-16 14:40:52.122 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 14:40:52.142 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1015.9993ms
[2023-10-16 14:40:52.142 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:45:31.286 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:45:31.355 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 14:45:31.392 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:45:31.410 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:45:31.437 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:45:32.195 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:45:32.323 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:45:32.331 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:45:32.374 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:45:32.409 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 14:45:32.447 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.8943ms.
[2023-10-16 14:45:32.452 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 14:45:32.472 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1032.3825ms
[2023-10-16 14:45:32.472 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 14:52:07.734 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:52:07.792 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 14:52:07.812 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:52:07.823 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:52:07.838 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:52:08.418 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:52:08.535 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:52:08.542 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:52:08.596 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 14:52:08.600 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 759.376ms
[2023-10-16 14:52:08.601 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 14:52:08.602 +07:00  ERR]  Invalid banknotes type
[2023-10-16 14:52:08.619 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 827.7640ms
[2023-10-16 14:56:18.904 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:56:18.951 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 14:56:18.969 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:56:18.979 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 14:56:18.990 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:56:19.570 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:56:19.681 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:56:19.694 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:56:19.730 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 14:56:19.760 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 14:56:19.777 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 784.1299ms
[2023-10-16 14:56:19.778 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 14:56:19.784 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 834.4279ms
[2023-10-16 14:56:29.563 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:56:29.630 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 14:56:29.658 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:56:29.671 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 14:56:29.691 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 14:56:30.348 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:56:30.473 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:56:30.480 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:56:30.526 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 14:56:30.565 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 14:56:30.603 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.1481ms.
[2023-10-16 14:56:30.610 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 14:56:30.632 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 938.4261ms
[2023-10-16 14:56:30.633 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 14:57:37.904 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 14:57:37.963 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 14:57:37.983 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 14:57:37.992 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 14:57:38.007 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 14:57:38.575 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 14:57:38.687 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 14:57:38.700 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 14:57:38.753 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 14:57:38.765 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 14:57:38.799 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 14:57:38.833 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.836 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.882 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 14:57:38.896 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.896 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.897 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.897 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 14:57:38.898 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 14:57:38.903 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 14:57:38.921 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 14:57:38.926 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 14:57:38.937 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 927.3073ms
[2023-10-16 14:57:38.938 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 14:57:38.944 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 982.5634ms
[2023-10-16 15:02:48.544 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:02:48.602 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 15:02:48.621 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:02:48.632 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:48.647 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:02:49.244 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:49.361 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:49.369 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:49.423 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:02:49.426 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 777.1095ms
[2023-10-16 15:02:49.427 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:49.428 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:02:49.445 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 844.5481ms
[2023-10-16 15:02:57.027 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:02:57.073 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:02:57.091 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:02:57.102 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:02:57.114 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:02:57.697 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:57.815 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:57.823 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:57.860 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:02:57.901 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:02:57.919 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 802.3672ms
[2023-10-16 15:02:57.919 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:02:57.926 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 853.8405ms
[2023-10-16 15:02:57.931 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 15:02:57.935 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:02:57.938 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:02:57.976 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:57.977 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:57.978 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:57.982 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 15:02:57.990 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:02:57.992 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 54.2127ms
[2023-10-16 15:02:57.992 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:02:57.992 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 61.2739ms
[2023-10-16 15:02:57.996 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 15:02:58.000 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:58.005 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:02:58.075 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:58.076 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:58.076 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:58.130 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:02:58.132 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 126.4784ms
[2023-10-16 15:02:58.132 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:58.133 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:02:58.138 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 142.1063ms
[2023-10-16 15:02:58.140 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:02:58.140 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:58.140 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:02:58.168 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:58.169 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:58.169 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:58.172 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:02:58.173 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:02:58.184 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:02:58.187 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:02:58.192 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:02:58.193 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:02:58.194 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 53.8581ms
[2023-10-16 15:02:58.194 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:02:58.195 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:02:58.195 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 54.6605ms
[2023-10-16 15:02:58.262 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 15:02:58.262 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:02:58.264 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:02:58.272 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 7.4112ms
[2023-10-16 15:02:58.272 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:02:58.273 +07:00  ERR]  User not found
[2023-10-16 15:02:58.273 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 11.3659ms
[2023-10-16 15:02:58.274 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 15:02:58.274 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:02:58.274 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:02:58.293 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:02:58.294 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.3801ms
[2023-10-16 15:02:58.294 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:02:58.294 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.7734ms
[2023-10-16 15:02:58.295 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 15:02:58.296 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.298 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:02:58.327 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:58.328 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:58.328 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:58.336 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:02:58.337 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 38.6942ms
[2023-10-16 15:02:58.337 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.337 +07:00  ERR]  Invalid coffee type
[2023-10-16 15:02:58.337 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 41.6230ms
[2023-10-16 15:02:58.338 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 15:02:58.338 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.338 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:02:58.365 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:58.366 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:58.366 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:58.367 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:02:58.378 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:02:58.393 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 54.5276ms
[2023-10-16 15:02:58.393 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.393 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 15:02:58.393 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 55.1724ms
[2023-10-16 15:02:58.394 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 15:02:58.395 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.395 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:02:58.422 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:02:58.423 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:02:58.423 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:02:58.425 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:02:58.426 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:02:58.431 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 15:02:58.434 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.435 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.480 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:02:58.509 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.510 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.510 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.511 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:02:58.512 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 15:02:58.569 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:02:58.632 +07:00  INF]  Executed DbCommand (59ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 15:02:58.633 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 15:02:58.634 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 239.5928ms
[2023-10-16 15:02:58.634 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:02:58.634 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 239.9665ms
[2023-10-16 15:03:14.694 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:03:14.755 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:03:14.776 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:03:14.787 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:14.802 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:15.380 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:15.498 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:15.506 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:15.564 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:15.567 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:15.599 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:15.630 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:15.678 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:03:15.696 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:03:15.703 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 898.5042ms
[2023-10-16 15:03:15.703 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:15.710 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 956.2040ms
[2023-10-16 15:03:21.142 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:03:21.191 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:03:21.211 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:03:21.223 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:03:21.234 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:21.825 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:21.943 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:21.950 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:21.986 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:03:22.022 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:03:22.040 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 803.1378ms
[2023-10-16 15:03:22.041 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:03:22.047 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 858.2453ms
[2023-10-16 15:03:22.052 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 15:03:22.055 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:03:22.059 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:22.096 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.097 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.098 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.107 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 15:03:22.118 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:03:22.120 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 61.2018ms
[2023-10-16 15:03:22.120 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:03:22.121 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 69.2420ms
[2023-10-16 15:03:22.126 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 15:03:22.129 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:22.134 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:22.205 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.206 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.207 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.255 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:22.255 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 121.0889ms
[2023-10-16 15:03:22.256 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:22.257 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:03:22.262 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 136.5658ms
[2023-10-16 15:03:22.264 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:03:22.264 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:22.264 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:22.292 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.293 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.293 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.296 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:22.296 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:22.304 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:22.305 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:22.310 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:03:22.311 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:03:22.312 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 48.2811ms
[2023-10-16 15:03:22.313 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:22.313 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:03:22.313 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 49.2953ms
[2023-10-16 15:03:22.365 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 15:03:22.365 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:03:22.368 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:03:22.373 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.8532ms
[2023-10-16 15:03:22.373 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:03:22.373 +07:00  ERR]  User not found
[2023-10-16 15:03:22.373 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.9114ms
[2023-10-16 15:03:22.374 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 15:03:22.374 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:03:22.374 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:03:22.393 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:03:22.393 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.2118ms
[2023-10-16 15:03:22.393 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:03:22.394 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.5480ms
[2023-10-16 15:03:22.395 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 15:03:22.395 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.398 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:03:22.427 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.427 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.427 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.436 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:03:22.437 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 38.4782ms
[2023-10-16 15:03:22.437 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.437 +07:00  ERR]  Invalid coffee type
[2023-10-16 15:03:22.437 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 41.5372ms
[2023-10-16 15:03:22.438 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 15:03:22.438 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.438 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:03:22.465 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.466 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.466 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.467 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:03:22.478 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:03:22.493 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 54.4768ms
[2023-10-16 15:03:22.493 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.493 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 15:03:22.493 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 55.1369ms
[2023-10-16 15:03:22.494 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 15:03:22.494 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.494 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:03:22.522 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:22.523 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:22.523 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:22.525 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:03:22.526 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:03:22.531 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 15:03:22.534 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.534 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.580 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:03:22.593 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.594 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.594 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.594 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:03:22.595 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 15:03:22.599 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:03:22.605 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 15:03:22.606 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 15:03:22.607 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 112.8059ms
[2023-10-16 15:03:22.607 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:03:22.607 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 113.2148ms
[2023-10-16 15:03:28.938 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:03:28.996 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:03:29.016 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:03:29.027 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:29.042 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:03:29.610 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:03:29.729 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:03:29.737 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:03:29.798 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:29.801 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:03:29.832 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:29.862 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:03:29.910 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:03:29.927 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:03:29.935 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 889.6963ms
[2023-10-16 15:03:29.935 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:03:29.942 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 946.6333ms
[2023-10-16 15:04:27.641 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:04:27.690 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:27.708 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:04:27.719 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:27.730 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.310 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.428 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.435 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.471 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:28.505 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.523 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 790.3419ms
[2023-10-16 15:04:28.523 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.531 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 842.2328ms
[2023-10-16 15:04:28.533 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:28.536 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.536 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.573 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.575 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.575 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.576 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:28.577 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.577 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 41.0617ms
[2023-10-16 15:04:28.578 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.578 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 44.5969ms
[2023-10-16 15:04:28.581 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:28.583 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.583 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.655 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.656 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.657 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.662 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:28.667 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.668 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 84.9599ms
[2023-10-16 15:04:28.668 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.669 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 88.5373ms
[2023-10-16 15:04:28.670 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 15:04:28.670 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:04:28.673 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.701 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.701 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.702 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.706 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 15:04:28.714 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.716 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 42.6767ms
[2023-10-16 15:04:28.716 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:04:28.716 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 46.0180ms
[2023-10-16 15:04:28.716 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:28.716 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.717 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.745 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.745 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.746 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.746 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:28.746 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.746 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 29.9273ms
[2023-10-16 15:04:28.747 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.747 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 30.3658ms
[2023-10-16 15:04:28.751 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 15:04:28.752 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:28.758 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.785 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.786 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.786 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.833 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:04:28.833 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 75.1328ms
[2023-10-16 15:04:28.833 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:28.835 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:04:28.839 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 88.6590ms
[2023-10-16 15:04:28.840 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:28.840 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.840 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.868 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.868 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.868 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.869 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:28.869 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:28.869 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 29.1317ms
[2023-10-16 15:04:28.869 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.869 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 29.5202ms
[2023-10-16 15:04:28.871 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:04:28.871 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:28.871 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:28.898 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:28.898 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:28.899 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:28.902 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:04:28.902 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:04:28.909 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:04:28.911 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:04:28.915 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:04:28.916 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:04:28.918 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 46.3077ms
[2023-10-16 15:04:28.918 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:28.918 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:04:28.918 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 47.1062ms
[2023-10-16 15:04:28.981 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:28.982 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:28.982 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:29.009 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.009 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.009 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.010 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:29.010 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:29.010 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 28.4181ms
[2023-10-16 15:04:29.010 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.010 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 28.8282ms
[2023-10-16 15:04:29.012 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 15:04:29.012 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:04:29.015 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:04:29.019 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.1992ms
[2023-10-16 15:04:29.019 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:04:29.019 +07:00  ERR]  User not found
[2023-10-16 15:04:29.019 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.1265ms
[2023-10-16 15:04:29.020 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:29.020 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.020 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:29.047 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.047 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.048 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.048 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:29.048 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:29.048 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 28.5671ms
[2023-10-16 15:04:29.048 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.048 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 28.8985ms
[2023-10-16 15:04:29.049 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 15:04:29.049 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:04:29.050 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:04:29.069 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:04:29.069 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.9065ms
[2023-10-16 15:04:29.070 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:04:29.070 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 20.2525ms
[2023-10-16 15:04:29.070 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:29.070 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.070 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:29.098 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.098 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.098 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.099 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:29.099 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:29.099 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 28.8706ms
[2023-10-16 15:04:29.099 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.099 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 29.2141ms
[2023-10-16 15:04:29.101 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 15:04:29.101 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.104 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:04:29.131 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.131 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.131 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.140 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:04:29.141 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 36.7145ms
[2023-10-16 15:04:29.141 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.141 +07:00  ERR]  Invalid coffee type
[2023-10-16 15:04:29.141 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 39.8765ms
[2023-10-16 15:04:29.141 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:29.141 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.141 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:29.169 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.170 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.170 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.170 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:29.170 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:29.171 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 29.1022ms
[2023-10-16 15:04:29.171 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.171 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 29.4409ms
[2023-10-16 15:04:29.171 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 15:04:29.172 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.172 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:04:29.198 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.199 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.199 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.200 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:04:29.211 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:04:29.212 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 39.8625ms
[2023-10-16 15:04:29.212 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.212 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 15:04:29.212 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 40.4454ms
[2023-10-16 15:04:29.212 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:29.212 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.212 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:29.239 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.240 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.240 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.241 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:29.241 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:29.241 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 28.41ms
[2023-10-16 15:04:29.241 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:29.241 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 28.7543ms
[2023-10-16 15:04:29.242 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 15:04:29.242 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.242 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:04:29.270 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:29.271 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:29.271 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:29.274 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:04:29.274 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:04:29.279 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 15:04:29.282 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.283 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.330 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:04:29.343 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.344 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.344 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.345 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:04:29.346 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 15:04:29.369 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:04:29.376 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 15:04:29.377 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 15:04:29.378 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 135.4633ms
[2023-10-16 15:04:29.378 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:04:29.378 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 135.8249ms
[2023-10-16 15:04:35.120 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:04:35.169 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:04:35.187 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:04:35.198 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:35.209 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:35.797 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:35.912 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:35.920 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:35.956 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:04:35.990 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:04:36.008 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 796.157ms
[2023-10-16 15:04:36.009 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:04:36.016 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 848.0153ms
[2023-10-16 15:04:36.024 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:04:36.028 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:36.035 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:04:36.074 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:04:36.075 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:04:36.075 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:04:36.123 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:04:36.125 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:04:36.136 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:04:36.144 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:04:36.149 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 114.0606ms
[2023-10-16 15:04:36.149 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:04:36.151 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:04:36.158 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 133.8147ms
[2023-10-16 15:05:06.396 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:05:06.450 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:05:06.468 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:05:06.479 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:05:06.490 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:05:07.071 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:05:07.188 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:05:07.196 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:05:07.233 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:05:07.273 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:05:07.293 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 799.5317ms
[2023-10-16 15:05:07.293 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:05:07.300 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 851.6304ms
[2023-10-16 15:05:07.308 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:05:07.312 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:05:07.318 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:05:07.356 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:05:07.357 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:05:07.358 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:05:07.404 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:05:07.406 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:05:07.418 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:05:07.425 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:05:07.431 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 112.0888ms
[2023-10-16 15:05:07.431 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:05:07.433 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:05:07.439 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 130.4092ms
[2023-10-16 15:05:13.105 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:05:13.151 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:05:13.169 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:05:13.180 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:05:13.191 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:05:13.756 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:05:13.874 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:05:13.882 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:05:13.919 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:05:13.953 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:05:13.971 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 777.1916ms
[2023-10-16 15:05:13.971 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:05:13.978 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 827.8267ms
[2023-10-16 15:05:13.986 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:05:13.990 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:05:13.996 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:05:14.034 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:05:14.035 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:05:14.036 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:05:14.086 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:05:14.088 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:05:14.099 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:05:14.107 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:05:14.109 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 112.5235ms
[2023-10-16 15:05:14.109 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:05:14.111 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:05:14.116 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 129.8718ms
[2023-10-16 15:07:33.310 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:07:33.357 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:07:33.375 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:07:33.386 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:07:33.397 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:07:33.972 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:07:34.088 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:07:34.096 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:07:34.132 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:07:34.167 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:07:34.184 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 784.4522ms
[2023-10-16 15:07:34.184 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:07:34.191 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 835.1771ms
[2023-10-16 15:07:34.198 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27
[2023-10-16 15:07:34.202 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:07:34.208 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:07:34.245 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:07:34.246 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:07:34.247 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:07:34.293 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:07:34.294 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 86.1675ms
[2023-10-16 15:07:34.295 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:07:34.296 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:07:34.301 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 102.7928ms
[2023-10-16 15:07:39.149 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:07:39.196 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:07:39.214 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:07:39.225 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:07:39.236 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:07:39.807 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:07:39.923 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:07:39.930 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:07:39.966 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:07:40.000 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:07:40.018 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 779.8442ms
[2023-10-16 15:07:40.019 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:07:40.026 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 831.0925ms
[2023-10-16 15:07:40.034 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:07:40.038 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:07:40.044 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:07:40.085 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:07:40.086 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:07:40.086 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:07:40.136 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:07:40.138 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:07:40.149 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:07:40.157 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:07:40.162 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 118.3163ms
[2023-10-16 15:07:40.163 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:07:40.165 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:07:40.170 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 136.5655ms
[2023-10-16 15:08:16.120 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:08:16.167 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:08:16.185 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:08:16.196 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:08:16.207 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:08:16.816 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:08:16.931 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:08:16.939 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:08:16.974 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:08:17.009 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:08:17.027 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 817.3668ms
[2023-10-16 15:08:17.027 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:08:17.034 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 868.0518ms
[2023-10-16 15:08:17.042 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:08:17.046 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:08:17.052 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:08:17.088 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:08:17.089 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:08:17.090 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:08:17.136 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:08:17.138 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:08:17.149 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:08:17.157 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:08:17.162 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 109.8254ms
[2023-10-16 15:08:17.162 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:08:17.164 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:08:17.170 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 128.1693ms
[2023-10-16 15:08:44.675 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:08:44.769 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:08:44.791 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:08:44.806 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:08:44.829 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:08:45.557 +07:00  INF]  Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:08:45.689 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:08:45.697 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:08:45.742 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:08:45.777 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:08:45.814 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.9477ms.
[2023-10-16 15:08:45.819 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:08:45.839 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1007.3267ms
[2023-10-16 15:08:45.839 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:08:59.883 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 15115.4979ms
[2023-10-16 15:09:17.377 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:09:17.389 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:09:17.396 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:09:17.434 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:09:17.436 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:09:17.436 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:09:17.469 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:09:17.504 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:09:17.506 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:09:17.520 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:09:17.534 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:09:17.616 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 219.3572ms
[2023-10-16 15:09:17.616 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:09:17.628 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:09:17.636 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 259.4735ms
[2023-10-16 15:10:40.320 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:10:40.370 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:10:40.388 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:10:40.399 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:10:40.410 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:10:40.975 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:10:41.098 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:10:41.106 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:10:41.143 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:10:41.178 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:10:41.197 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 783.3407ms
[2023-10-16 15:10:41.197 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:10:41.204 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 834.5333ms
[2023-10-16 15:10:41.211 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:10:41.215 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:10:41.221 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:10:41.261 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:10:41.262 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:10:41.262 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:10:41.308 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:10:41.310 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:10:41.321 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:10:41.329 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:10:41.331 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 109.8459ms
[2023-10-16 15:10:41.331 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:10:41.332 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:10:41.338 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 126.5036ms
[2023-10-16 15:23:23.063 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:23:23.162 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:23:23.180 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:23:23.191 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:23:23.227 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:23:24.158 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:23:24.275 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:23:24.282 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:23:24.318 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:23:24.352 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:23:24.370 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1139.716ms
[2023-10-16 15:23:24.370 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:23:24.377 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 1216.4102ms
[2023-10-16 15:23:24.403 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54
[2023-10-16 15:23:24.407 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:23:24.414 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:23:24.450 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:23:24.451 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:23:24.452 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:23:24.521 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:23:24.523 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:23:24.534 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:23:24.558 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:23:24.560 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 146.2921ms
[2023-10-16 15:23:24.560 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:23:24.562 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:23:24.567 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing/ application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 163.8113ms
[2023-10-16 15:23:40.701 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:23:40.749 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:23:40.766 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:23:40.777 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:23:40.788 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:23:41.362 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:23:41.477 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:23:41.485 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:23:41.520 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:23:41.554 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:23:41.572 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 781.7647ms
[2023-10-16 15:23:41.573 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:23:41.579 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 831.9215ms
[2023-10-16 15:23:41.587 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:23:41.591 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:23:41.597 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:23:41.633 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:23:41.634 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:23:41.634 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:23:41.680 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:23:41.682 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:23:41.693 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:23:41.701 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:23:41.706 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 109.0976ms
[2023-10-16 15:23:41.707 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:23:41.708 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:23:41.714 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 127.2728ms
[2023-10-16 15:25:12.143 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:25:12.225 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:25:12.253 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:25:12.270 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:25:12.291 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:25:13.006 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:25:13.138 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:25:13.146 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:25:13.241 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:25:13.276 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:25:13.313 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.571ms.
[2023-10-16 15:25:13.318 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:25:13.340 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1046.2963ms
[2023-10-16 15:25:13.340 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:25:13.355 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 1132.0533ms
[2023-10-16 15:25:26.660 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:25:26.672 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:25:26.679 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:25:26.718 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:25:26.719 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:25:26.720 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:25:26.753 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:25:26.788 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:25:26.791 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:25:58.078 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:25:58.793 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:26:13.835 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 47155.1091ms
[2023-10-16 15:26:13.838 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:28:53.192 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:28:53.242 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:28:53.260 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:28:53.271 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:28:53.283 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:28:53.874 +07:00  INF]  Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:28:53.992 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:28:54.000 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:28:54.036 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:28:54.070 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:28:54.088 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 802.4545ms
[2023-10-16 15:28:54.088 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:28:54.095 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 853.7764ms
[2023-10-16 15:28:54.102 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:28:54.106 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:28:54.112 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:28:54.152 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:28:54.153 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:28:54.154 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:28:54.200 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:28:54.202 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:28:54.213 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:28:54.221 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:28:54.226 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 113.7082ms
[2023-10-16 15:28:54.226 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:28:54.228 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:28:54.234 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 131.6936ms
[2023-10-16 15:31:04.118 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:31:04.185 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:31:04.214 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:31:04.227 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:31:04.248 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:31:05.013 +07:00  INF]  Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:31:05.146 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:31:05.154 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:31:05.199 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:31:05.234 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:31:05.270 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.8848ms.
[2023-10-16 15:31:05.275 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:31:05.296 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 1044.738ms
[2023-10-16 15:31:05.296 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:31:05.309 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 1125.6860ms
[2023-10-16 15:31:10.242 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:31:10.254 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:31:10.261 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:31:10.301 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:31:10.302 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:31:10.302 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:31:10.335 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:31:10.370 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:31:10.372 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:31:26.706 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:31:29.816 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:31:43.359 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 33098.1897ms
[2023-10-16 15:31:43.362 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:35:20.152 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:35:20.161 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 249924.0178ms
[2023-10-16 15:35:51.019 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:35:51.067 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance/ - -
[2023-10-16 15:35:51.084 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:35:51.095 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:35:51.106 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:35:51.691 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:35:51.806 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:35:51.814 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:35:51.850 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:35:51.885 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:35:51.903 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 793.6855ms
[2023-10-16 15:35:51.903 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:35:51.910 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance/ - - - 200 - application/json;+charset=utf-8 844.1959ms
[2023-10-16 15:35:51.917 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 15:35:51.921 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:35:51.927 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:35:51.964 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:35:51.965 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:35:51.965 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:35:52.012 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:35:52.013 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 86.305ms
[2023-10-16 15:35:52.014 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:35:52.015 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:35:52.020 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 103.0506ms
[2023-10-16 15:36:52.317 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:36:52.364 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 15:36:52.382 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:36:52.393 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:36:52.405 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:36:52.987 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:36:53.100 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:36:53.113 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:36:53.151 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:36:53.186 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:36:53.204 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 796.2992ms
[2023-10-16 15:36:53.204 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:36:53.211 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 847.5389ms
[2023-10-16 15:37:06.971 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:37:07.022 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 15:37:07.040 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:37:07.051 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:37:07.062 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:07.638 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:07.755 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:07.763 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:07.800 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:37:07.835 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:37:07.853 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 788.2623ms
[2023-10-16 15:37:07.853 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:37:07.860 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 839.3875ms
[2023-10-16 15:37:07.865 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 15:37:07.871 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:37:07.876 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:07.918 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:07.919 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:07.920 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:07.929 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 15:37:07.941 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:37:07.943 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 66.9037ms
[2023-10-16 15:37:07.944 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:37:07.945 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 79.4555ms
[2023-10-16 15:37:07.949 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 15:37:07.952 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:07.958 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:08.028 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:08.029 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:08.030 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:08.079 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:08.080 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 121.8078ms
[2023-10-16 15:37:08.080 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:08.081 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:37:08.087 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 137.8893ms
[2023-10-16 15:37:08.088 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:37:08.089 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:08.089 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:08.118 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:08.118 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:08.119 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:08.122 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:08.123 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:08.130 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:37:08.131 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:37:08.136 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:37:08.137 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:37:08.138 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 49.6075ms
[2023-10-16 15:37:08.138 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:08.139 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:37:08.139 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 50.4359ms
[2023-10-16 15:37:08.204 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 15:37:08.205 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:37:08.207 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:37:08.211 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.1388ms
[2023-10-16 15:37:08.211 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:37:08.211 +07:00  ERR]  User not found
[2023-10-16 15:37:08.211 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.1436ms
[2023-10-16 15:37:08.212 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 15:37:08.212 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:37:08.212 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:37:08.719 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:37:08.720 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 507.6982ms
[2023-10-16 15:37:08.720 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:37:08.720 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 508.0646ms
[2023-10-16 15:37:08.722 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 15:37:08.723 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.725 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:37:08.753 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:08.754 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:08.754 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:08.763 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:37:08.764 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 38.2248ms
[2023-10-16 15:37:08.764 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.764 +07:00  ERR]  Invalid coffee type
[2023-10-16 15:37:08.764 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 41.7683ms
[2023-10-16 15:37:08.765 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 15:37:08.765 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.765 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:37:08.793 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:08.794 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:08.794 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:08.796 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:37:08.820 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:37:08.821 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 55.406ms
[2023-10-16 15:37:08.821 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.821 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 15:37:08.821 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 56.1467ms
[2023-10-16 15:37:08.823 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 15:37:08.823 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.823 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:37:08.853 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:08.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:08.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:08.856 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:37:08.856 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:37:08.862 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 15:37:08.865 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.866 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.912 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:37:08.926 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.926 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.927 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.927 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:37:08.928 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 15:37:08.953 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:37:08.959 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 15:37:08.960 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 15:37:08.962 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 138.6407ms
[2023-10-16 15:37:08.962 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:37:08.962 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 139.1595ms
[2023-10-16 15:37:31.933 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:37:31.991 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:37:32.010 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:37:32.021 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:32.036 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:32.617 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:32.735 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:32.743 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:32.798 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:32.801 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:32.832 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:37:32.861 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:37:32.911 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:37:32.929 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:37:32.936 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 897.5884ms
[2023-10-16 15:37:32.937 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:32.944 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 954.0259ms
[2023-10-16 15:37:32.946 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:37:32.949 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:32.950 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:37:32.987 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:37:32.988 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:37:32.988 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:37:32.990 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:32.990 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:37:32.991 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:37:32.996 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:37:32.997 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 47.2718ms
[2023-10-16 15:37:32.997 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:37:32.998 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:37:33.005 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 58.6794ms
[2023-10-16 15:42:37.447 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:42:37.504 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:42:37.524 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:42:37.535 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:42:37.549 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:42:38.113 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:42:38.232 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:42:38.240 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:42:38.294 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:42:38.296 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:42:38.326 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:42:38.355 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:42:38.404 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:42:38.421 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:42:38.428 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 875.5196ms
[2023-10-16 15:42:38.428 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:42:38.436 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 933.1047ms
[2023-10-16 15:42:38.440 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 15:42:38.443 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:42:38.443 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:42:38.481 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:42:38.482 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:42:38.482 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:42:38.484 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:42:38.485 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 41.2941ms
[2023-10-16 15:42:38.485 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:42:38.486 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:42:38.494 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 54.1235ms
[2023-10-16 15:51:12.547 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:51:12.606 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:51:12.626 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:51:12.637 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:12.652 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:51:13.230 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:51:13.347 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:51:13.354 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:51:13.408 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:13.411 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:13.441 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:51:13.470 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:51:13.518 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:51:13.535 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:51:13.543 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 887.7665ms
[2023-10-16 15:51:13.543 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:13.550 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 945.6895ms
[2023-10-16 15:51:13.554 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 15:51:13.557 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:13.558 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:51:13.597 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:51:13.598 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:51:13.598 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:51:13.600 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:13.601 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 42.8921ms
[2023-10-16 15:51:13.601 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:13.602 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:51:13.609 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 55.1096ms
[2023-10-16 15:51:29.176 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:51:29.235 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:51:29.254 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:51:29.265 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:29.280 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:51:29.859 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:51:29.981 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:51:29.989 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:51:30.045 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:30.048 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:30.079 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:51:30.108 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:51:30.158 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:51:30.176 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:51:30.183 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 900.8396ms
[2023-10-16 15:51:30.185 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:30.193 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 959.2978ms
[2023-10-16 15:51:30.196 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:51:30.199 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:30.201 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:51:30.239 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:51:30.240 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:51:30.240 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:51:30.242 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:30.242 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:51:30.243 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:51:30.248 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:51:30.249 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 47.9813ms
[2023-10-16 15:51:30.249 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:51:30.251 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:51:30.258 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 62.0660ms
[2023-10-16 15:52:14.159 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:52:14.217 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:52:14.237 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:52:14.247 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:52:14.262 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:52:14.829 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:52:14.949 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:52:14.956 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:52:15.009 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:52:15.011 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:52:15.041 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:52:15.106 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:52:15.114 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:52:15.119 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 854.0788ms
[2023-10-16 15:52:15.119 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:52:15.120 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:52:15.139 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 922.7384ms
[2023-10-16 15:54:00.845 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:54:00.903 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:54:00.922 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:54:00.933 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:54:00.947 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:54:01.524 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:54:01.640 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:54:01.648 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:54:01.702 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:54:01.704 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:54:01.735 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:54:01.800 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:54:01.807 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:54:01.812 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 861.5355ms
[2023-10-16 15:54:01.812 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:54:01.813 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:54:01.830 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 928.5128ms
[2023-10-16 15:54:10.412 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:54:24.365 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:54:24.394 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:54:24.407 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:54:24.427 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:54:25.081 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:54:25.208 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:54:25.216 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:54:25.279 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:54:25.316 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:54:25.318 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:55:17.843 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:55:31.747 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:55:31.765 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:55:32.601 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:55:48.440 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83154.2215ms.
[2023-10-16 15:55:48.446 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:55:48.454 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 84020.6795ms
[2023-10-16 15:55:48.455 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:55:59.055 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 94681.6588ms
[2023-10-16 15:56:30.779 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:56:30.786 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:56:30.787 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:56:30.830 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:56:30.831 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:56:30.831 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:56:30.842 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:56:30.843 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:56:30.843 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:56:41.314 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:56:43.048 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:56:43.594 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:56:43.596 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:56:48.402 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17559.1163ms.
[2023-10-16 15:56:48.403 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:56:48.404 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 17616.0709ms
[2023-10-16 15:56:48.404 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:56:50.432 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 19652.2591ms
[2023-10-16 15:58:07.507 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:58:07.571 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:07.591 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:58:07.603 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:07.618 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.187 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.343 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.351 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.406 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.408 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.438 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.504 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.512 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.516 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 895.7741ms
[2023-10-16 15:58:08.517 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.518 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.534 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 964.5644ms
[2023-10-16 15:58:08.587 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.590 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.591 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.631 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.631 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.632 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.633 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.634 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.634 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.638 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.638 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.640 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.641 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 50.745ms
[2023-10-16 15:58:08.641 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.642 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.642 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 55.3651ms
[2023-10-16 15:58:08.643 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.645 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.646 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.715 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.716 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.716 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.718 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.718 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.719 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.719 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.721 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.723 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 77.6405ms
[2023-10-16 15:58:08.724 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.724 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.725 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 81.0857ms
[2023-10-16 15:58:08.727 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.727 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.727 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.754 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.755 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.755 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.756 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.756 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.756 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.756 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.757 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.758 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 30.857ms
[2023-10-16 15:58:08.758 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.758 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.758 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 31.6032ms
[2023-10-16 15:58:08.759 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.759 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.759 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.786 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.787 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.787 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.788 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.788 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.789 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.789 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.789 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.790 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 30.2776ms
[2023-10-16 15:58:08.790 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.790 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.790 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 30.8986ms
[2023-10-16 15:58:08.791 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.791 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.791 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.820 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.820 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.820 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.821 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.821 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.822 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.822 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.823 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.823 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 31.8112ms
[2023-10-16 15:58:08.823 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.823 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.823 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 32.4085ms
[2023-10-16 15:58:08.824 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.824 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.824 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.852 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.853 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.854 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.854 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.855 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.855 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.856 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.856 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 31.4524ms
[2023-10-16 15:58:08.856 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.856 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.856 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 32.0429ms
[2023-10-16 15:58:08.857 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.857 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.857 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.884 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.885 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.885 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.886 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.886 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.887 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.887 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.888 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.888 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 30.5201ms
[2023-10-16 15:58:08.888 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.888 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.888 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 31.0837ms
[2023-10-16 15:58:08.889 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:08.889 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.889 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:08.917 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:08.918 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:08.918 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:08.919 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.919 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:08.919 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:08.920 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:08.920 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:08.921 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 31.3085ms
[2023-10-16 15:58:08.921 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:08.921 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:08.921 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 31.9589ms
[2023-10-16 15:58:16.374 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:58:16.434 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:16.454 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:58:16.465 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:16.480 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:17.044 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:17.162 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:17.171 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:17.225 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:17.227 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:17.257 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:17.324 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:17.332 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:17.336 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 853.1266ms
[2023-10-16 15:58:17.336 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:17.338 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:17.353 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 920.6000ms
[2023-10-16 15:58:28.326 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:58:28.383 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:28.402 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:58:28.413 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:28.428 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:29.000 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:29.118 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:29.127 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:29.181 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:29.183 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:29.213 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:29.279 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 15:58:29.286 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:29.290 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 860.3177ms
[2023-10-16 15:58:29.291 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:29.292 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:29.313 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 931.6981ms
[2023-10-16 15:58:55.626 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:58:55.673 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 15:58:55.691 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:58:55.701 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:58:55.712 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:56.286 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.401 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.408 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.445 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 15:58:56.479 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:58:56.497 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 781.6524ms
[2023-10-16 15:58:56.497 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 15:58:56.504 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 832.1348ms
[2023-10-16 15:58:56.510 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 15:58:56.513 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:58:56.516 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:56.553 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.555 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.555 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.564 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 15:58:56.575 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 15:58:56.577 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 60.397ms
[2023-10-16 15:58:56.577 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 15:58:56.578 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 68.5924ms
[2023-10-16 15:58:56.582 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 15:58:56.586 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:56.591 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:56.661 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.663 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.663 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.710 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:56.710 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 119.0704ms
[2023-10-16 15:58:56.710 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:56.712 +07:00  ERR]  Invalid banknotes type
[2023-10-16 15:58:56.716 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 134.2159ms
[2023-10-16 15:58:56.718 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:58:56.718 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:56.718 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:58:56.749 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.749 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.750 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.753 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:56.754 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:58:56.760 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:56.762 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 15:58:56.767 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:56.768 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 15:58:56.769 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 50.5693ms
[2023-10-16 15:58:56.769 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:58:56.769 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 15:58:56.770 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 51.5066ms
[2023-10-16 15:58:56.835 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 15:58:56.835 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:58:56.838 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:58:56.842 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.1066ms
[2023-10-16 15:58:56.842 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:58:56.842 +07:00  ERR]  User not found
[2023-10-16 15:58:56.842 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.0983ms
[2023-10-16 15:58:56.843 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 15:58:56.843 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:58:56.843 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 15:58:56.861 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 15:58:56.862 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 18.9592ms
[2023-10-16 15:58:56.862 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 15:58:56.862 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.2743ms
[2023-10-16 15:58:56.864 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 15:58:56.864 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:56.867 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:58:56.894 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.895 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.895 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.905 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:58:56.905 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 38.3392ms
[2023-10-16 15:58:56.905 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:56.905 +07:00  ERR]  Invalid coffee type
[2023-10-16 15:58:56.905 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 41.2606ms
[2023-10-16 15:58:56.906 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 15:58:56.906 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:56.906 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:58:56.933 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.933 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.934 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.935 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:58:56.945 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:58:56.946 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 39.4438ms
[2023-10-16 15:58:56.946 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:56.946 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 15:58:56.946 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 40.0175ms
[2023-10-16 15:58:56.947 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 15:58:56.947 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:56.948 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 15:58:56.975 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:58:56.975 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:58:56.975 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:58:56.978 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 15:58:56.978 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:58:56.983 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 15:58:56.986 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:56.987 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:57.032 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 15:58:57.045 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:57.046 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:57.046 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:57.046 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 15:58:57.047 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 15:58:57.073 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 15:58:57.078 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 15:58:57.079 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 15:58:57.080 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 132.8637ms
[2023-10-16 15:58:57.081 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 15:58:57.081 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 133.2536ms
[2023-10-16 15:59:39.184 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 15:59:39.268 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 15:59:39.291 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 15:59:39.303 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 15:59:39.325 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 15:59:40.039 +07:00  INF]  Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 15:59:40.168 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 15:59:40.176 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 15:59:40.241 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 15:59:40.278 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:59:40.280 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 15:59:53.946 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:00:07.460 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 16:00:07.474 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:00:08.220 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 16:00:17.826 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37580.1493ms.
[2023-10-16 16:00:17.832 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 16:00:17.840 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 38511.2038ms
[2023-10-16 16:00:17.840 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:00:22.134 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 42865.9032ms
[2023-10-16 16:01:20.045 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 16:01:20.092 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 16:01:20.110 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 16:01:20.120 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 16:01:20.132 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:01:20.707 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:20.825 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:20.832 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:20.868 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 16:01:20.903 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 16:01:20.921 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 786.8027ms
[2023-10-16 16:01:20.922 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 16:01:20.929 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 838.2126ms
[2023-10-16 16:01:20.934 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 16:01:20.937 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 16:01:20.940 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:01:20.977 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:20.978 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:20.979 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:20.988 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 16:01:21.000 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 16:01:21.002 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 61.5639ms
[2023-10-16 16:01:21.002 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 16:01:21.003 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 69.4316ms
[2023-10-16 16:01:21.007 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 16:01:21.010 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:21.016 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:01:21.086 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:21.087 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:21.088 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:21.135 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:01:21.135 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 119.8148ms
[2023-10-16 16:01:21.136 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:21.137 +07:00  ERR]  Invalid banknotes type
[2023-10-16 16:01:21.142 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 134.7860ms
[2023-10-16 16:01:21.143 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 16:01:21.144 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:21.144 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:01:21.173 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:21.173 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:21.174 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:21.177 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:01:21.177 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:01:21.185 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:01:21.186 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:01:21.191 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 16:01:21.192 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 16:01:21.193 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 49.6267ms
[2023-10-16 16:01:21.193 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:21.194 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 16:01:21.194 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 50.5328ms
[2023-10-16 16:01:21.261 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 16:01:21.262 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:01:21.264 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 16:01:21.269 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.8901ms
[2023-10-16 16:01:21.269 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:01:21.269 +07:00  ERR]  User not found
[2023-10-16 16:01:21.269 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.9447ms
[2023-10-16 16:01:21.270 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 16:01:21.270 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:01:21.270 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 16:01:21.289 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 16:01:21.289 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.0585ms
[2023-10-16 16:01:21.290 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:01:21.290 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.3894ms
[2023-10-16 16:01:21.291 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 16:01:21.292 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.294 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:01:21.321 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:21.322 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:21.322 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:21.331 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:01:21.331 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 37.0658ms
[2023-10-16 16:01:21.331 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.331 +07:00  ERR]  Invalid coffee type
[2023-10-16 16:01:21.332 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 40.1022ms
[2023-10-16 16:01:21.332 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 16:01:21.333 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.333 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:01:21.360 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:21.360 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:21.361 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:21.362 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:01:21.373 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:01:21.374 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 41.2581ms
[2023-10-16 16:01:21.374 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.374 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 16:01:21.374 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 41.8652ms
[2023-10-16 16:01:21.376 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 16:01:21.376 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.376 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:01:21.403 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:21.404 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:21.404 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:21.407 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:01:21.407 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:01:21.426 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 16:01:21.429 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.430 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.477 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 16:01:21.491 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.491 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.492 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.492 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:01:21.493 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 16:01:21.517 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:01:21.523 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 16:01:21.524 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 16:01:21.525 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 149.3781ms
[2023-10-16 16:01:21.525 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:01:21.525 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 149.7452ms
[2023-10-16 16:01:30.997 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 16:01:31.106 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 16:01:31.138 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 16:01:31.152 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:31.176 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:01:31.867 +07:00  INF]  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:01:31.999 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:01:32.008 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:01:32.078 +07:00  INF]  Executing action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) - Validation state: "Valid"
[2023-10-16 16:01:32.116 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:01:32.119 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:01:38.996 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:01:42.803 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 16:01:42.818 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:01:43.616 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
[2023-10-16 16:01:49.344 +07:00  INF]  Executed action method CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17261.7528ms.
[2023-10-16 16:01:49.350 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 16:01:49.359 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 18178.8761ms
[2023-10-16 16:01:49.359 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:01:59.817 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 28711.0728ms
[2023-10-16 16:11:09.085 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 16:11:09.131 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 16:11:09.149 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 16:11:09.160 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 16:11:09.171 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:11:09.748 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:09.864 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:09.871 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:09.907 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
[2023-10-16 16:11:09.941 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 16:11:09.959 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 784.7389ms
[2023-10-16 16:11:09.959 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 16:11:09.966 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 835.3258ms
[2023-10-16 16:11:09.970 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 16:11:09.973 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 16:11:09.976 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:11:10.017 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.018 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.018 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.023 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
[2023-10-16 16:11:10.031 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 16:11:10.033 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 56.3193ms
[2023-10-16 16:11:10.033 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 16:11:10.033 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 62.9582ms
[2023-10-16 16:11:10.037 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 16:11:10.040 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:11:10.046 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:11:10.118 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.119 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.120 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.167 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:11:10.168 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 121.6094ms
[2023-10-16 16:11:10.168 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:11:10.170 +07:00  ERR]  Invalid banknotes type
[2023-10-16 16:11:10.175 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 137.9866ms
[2023-10-16 16:11:10.177 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 16:11:10.177 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:11:10.177 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 16:11:10.205 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.205 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.206 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.209 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:11:10.209 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 16:11:10.220 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:11:10.223 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 16:11:10.228 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 16:11:10.229 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 16:11:10.230 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 53.1776ms
[2023-10-16 16:11:10.230 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 16:11:10.231 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 16:11:10.231 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 53.9951ms
[2023-10-16 16:11:10.288 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 16:11:10.288 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:11:10.290 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 16:11:10.297 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 6.1334ms
[2023-10-16 16:11:10.297 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:11:10.297 +07:00  ERR]  User not found
[2023-10-16 16:11:10.298 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 10.0520ms
[2023-10-16 16:11:10.299 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 16:11:10.299 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:11:10.299 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 16:11:10.317 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 16:11:10.318 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.0051ms
[2023-10-16 16:11:10.318 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 16:11:10.318 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.3741ms
[2023-10-16 16:11:10.320 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 16:11:10.320 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.322 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:11:10.349 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.350 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.350 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.358 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:11:10.359 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 36.38ms
[2023-10-16 16:11:10.359 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.359 +07:00  ERR]  Invalid coffee type
[2023-10-16 16:11:10.359 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 39.3453ms
[2023-10-16 16:11:10.360 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 16:11:10.360 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.360 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:11:10.490 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.491 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.491 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.492 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:11:10.516 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:11:10.517 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 156.0569ms
[2023-10-16 16:11:10.517 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.517 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 16:11:10.517 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 156.6855ms
[2023-10-16 16:11:10.518 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 16:11:10.518 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.518 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 16:11:10.546 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 16:11:10.546 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c)
[2023-10-16 16:11:10.547 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachines" AS m)
[2023-10-16 16:11:10.549 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Coffees" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 16:11:10.550 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:11:10.554 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 16:11:10.558 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.558 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.603 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 16:11:10.617 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.617 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.618 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.618 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachines" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 16:11:10.619 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachines" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachines" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachines" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 16:11:10.644 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "Coffees" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 16:11:10.650 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Coffees" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 16:11:10.651 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 16:11:10.652 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 133.4366ms
[2023-10-16 16:11:10.652 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 16:11:10.652 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 133.8065ms
[2023-10-16 17:42:00.324 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 17:42:00.375 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 17:42:00.393 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 17:42:00.404 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 17:42:00.416 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:42:00.997 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:01.030 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.062 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.078 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:01.094 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:01.214 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 17:42:01.252 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 17:42:01.271 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 852.2229ms
[2023-10-16 17:42:01.271 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 17:42:01.278 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 904.7574ms
[2023-10-16 17:42:01.283 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 17:42:01.287 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 17:42:01.290 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:42:01.327 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:01.354 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.380 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.382 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:01.382 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:01.389 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 17:42:01.399 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 17:42:01.401 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 111.0185ms
[2023-10-16 17:42:01.401 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 17:42:01.401 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 118.0172ms
[2023-10-16 17:42:01.407 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 17:42:01.410 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:42:01.416 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:42:01.488 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:01.518 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.543 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.545 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:01.545 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:01.620 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:42:01.622 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 205.4805ms
[2023-10-16 17:42:01.622 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:42:01.623 +07:00  ERR]  Invalid banknotes type
[2023-10-16 17:42:01.629 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 222.2020ms
[2023-10-16 17:42:01.630 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 17:42:01.631 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:42:01.631 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:42:01.658 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:01.684 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.709 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.711 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:01.711 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:01.715 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:42:01.715 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:42:01.726 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 17:42:01.727 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 17:42:01.733 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 17:42:01.734 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 17:42:01.735 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 103.9608ms
[2023-10-16 17:42:01.735 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:42:01.735 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 17:42:01.735 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 104.7968ms
[2023-10-16 17:42:01.791 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 17:42:01.792 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:42:01.794 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 17:42:01.798 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.1135ms
[2023-10-16 17:42:01.798 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:42:01.798 +07:00  ERR]  User not found
[2023-10-16 17:42:01.798 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 7.0421ms
[2023-10-16 17:42:01.799 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 17:42:01.799 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:42:01.799 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 17:42:01.818 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 17:42:01.818 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 18.8512ms
[2023-10-16 17:42:01.818 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:42:01.818 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.1763ms
[2023-10-16 17:42:01.834 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 17:42:01.834 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:01.837 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:42:01.865 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:01.891 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.917 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:01.919 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:01.919 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:01.928 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:42:01.929 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 91.4611ms
[2023-10-16 17:42:01.929 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:01.929 +07:00  ERR]  Invalid coffee type
[2023-10-16 17:42:01.929 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 94.6466ms
[2023-10-16 17:42:01.930 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 17:42:01.930 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:01.930 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:42:01.958 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:02.085 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:02.111 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:02.113 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:02.113 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:02.115 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:42:02.125 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:42:02.126 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 195.3453ms
[2023-10-16 17:42:02.126 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:02.126 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 17:42:02.126 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 195.9729ms
[2023-10-16 17:42:02.127 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 17:42:02.127 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:02.127 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:42:02.156 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
[2023-10-16 17:42:02.183 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:02.209 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:42:02.210 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:42:02.210 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:42:02.213 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:42:02.213 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:42:02.218 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 17:42:02.221 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.222 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.263 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 17:42:02.276 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.277 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.277 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.277 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:42:02.279 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 17:42:02.299 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:42:02.305 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 17:42:02.306 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 17:42:02.307 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 179.4502ms
[2023-10-16 17:42:02.307 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:42:02.307 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 179.8239ms
[2023-10-16 17:44:24.163 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 17:44:24.212 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 17:44:24.231 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 17:44:24.242 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 17:44:24.253 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:44:24.845 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:24.875 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:24.891 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:24.909 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.027 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 17:44:25.065 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 17:44:25.085 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 828.5285ms
[2023-10-16 17:44:25.085 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 17:44:25.093 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 881.6450ms
[2023-10-16 17:44:25.097 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 17:44:25.101 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 17:44:25.104 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:44:25.143 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.169 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.171 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.172 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.178 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 17:44:25.186 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 17:44:25.188 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 83.4973ms
[2023-10-16 17:44:25.188 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 17:44:25.188 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 90.9466ms
[2023-10-16 17:44:25.193 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 17:44:25.197 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:44:25.202 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:44:25.275 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.301 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.303 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.303 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.378 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:44:25.379 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 176.7839ms
[2023-10-16 17:44:25.379 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:44:25.381 +07:00  ERR]  Invalid banknotes type
[2023-10-16 17:44:25.386 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 192.7534ms
[2023-10-16 17:44:25.387 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 17:44:25.387 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:44:25.387 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 17:44:25.414 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.440 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.441 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.442 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.445 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:44:25.446 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 17:44:25.457 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 17:44:25.458 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 17:44:25.463 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 17:44:25.464 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 17:44:25.465 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 78.0924ms
[2023-10-16 17:44:25.466 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 17:44:25.466 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 17:44:25.466 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 78.9475ms
[2023-10-16 17:44:25.517 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 17:44:25.517 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:44:25.520 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 17:44:25.524 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.0377ms
[2023-10-16 17:44:25.524 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:44:25.524 +07:00  ERR]  User not found
[2023-10-16 17:44:25.524 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 6.9006ms
[2023-10-16 17:44:25.525 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 17:44:25.525 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:44:25.525 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 17:44:25.543 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 17:44:25.544 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 18.9768ms
[2023-10-16 17:44:25.544 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 17:44:25.544 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.3034ms
[2023-10-16 17:44:25.546 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 17:44:25.546 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.549 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:44:25.589 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.614 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.615 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.615 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.624 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:44:25.625 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 76.048ms
[2023-10-16 17:44:25.625 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.625 +07:00  ERR]  Invalid coffee type
[2023-10-16 17:44:25.625 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 79.0470ms
[2023-10-16 17:44:25.626 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 17:44:25.626 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.626 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:44:25.653 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.678 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.680 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.680 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.681 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:44:25.692 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:44:25.693 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 66.3608ms
[2023-10-16 17:44:25.693 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.693 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 17:44:25.693 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 67.0244ms
[2023-10-16 17:44:25.694 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 17:44:25.694 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.694 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 17:44:25.722 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.747 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 17:44:25.749 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 17:44:25.749 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 17:44:25.751 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 17:44:25.752 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:44:25.757 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 17:44:25.760 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.760 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.801 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 17:44:25.815 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.815 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.816 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.816 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 17:44:25.817 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 17:44:25.841 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 17:44:25.848 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 17:44:25.849 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 17:44:25.850 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 155.4805ms
[2023-10-16 17:44:25.850 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 17:44:25.850 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 155.8476ms
[2023-10-16 18:03:22.846 +07:00  INF]  User profile is available. Using 'C:\Users\AfanasievVA\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 18:03:22.911 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 18:03:22.929 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 18:03:22.940 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 18:03:22.954 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 18:03:23.555 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:23.586 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:23.603 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:23.619 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:23.741 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 18:03:23.779 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 18:03:23.797 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 840.6636ms
[2023-10-16 18:03:23.798 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 18:03:23.805 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 895.7484ms
[2023-10-16 18:03:23.810 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 18:03:23.814 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 18:03:23.817 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 18:03:23.854 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:23.881 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:23.882 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:23.883 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:23.889 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 18:03:23.898 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 18:03:23.900 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 82.7846ms
[2023-10-16 18:03:23.900 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 18:03:23.900 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 90.3823ms
[2023-10-16 18:03:23.904 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 18:03:23.907 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 18:03:23.913 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 18:03:23.986 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.012 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.013 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:24.013 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:24.090 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 18:03:24.092 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 178.9098ms
[2023-10-16 18:03:24.092 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 18:03:24.093 +07:00  ERR]  Invalid banknotes type
[2023-10-16 18:03:24.098 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 194.1803ms
[2023-10-16 18:03:24.100 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 18:03:24.100 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 18:03:24.100 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 18:03:24.127 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.152 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.154 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:24.154 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:24.158 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 18:03:24.158 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 18:03:24.170 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 18:03:24.171 +07:00  ERR]  Failed executing DbCommand (0ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 18:03:24.176 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 18:03:24.177 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 18:03:24.178 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 78.0558ms
[2023-10-16 18:03:24.178 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 18:03:24.179 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 18:03:24.179 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 79.0792ms
[2023-10-16 18:03:24.234 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 18:03:24.235 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 18:03:24.237 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 18:03:24.241 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 4.0651ms
[2023-10-16 18:03:24.241 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 18:03:24.241 +07:00  ERR]  User not found
[2023-10-16 18:03:24.241 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 6.9401ms
[2023-10-16 18:03:24.242 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 18:03:24.242 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 18:03:24.242 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 18:03:24.261 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 18:03:24.262 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 19.0752ms
[2023-10-16 18:03:24.262 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 18:03:24.262 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 19.3714ms
[2023-10-16 18:03:24.264 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 18:03:24.264 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.266 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 18:03:24.306 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.445 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.446 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:24.447 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:24.456 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 18:03:24.457 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 190.7048ms
[2023-10-16 18:03:24.457 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.457 +07:00  ERR]  Invalid coffee type
[2023-10-16 18:03:24.457 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 193.6968ms
[2023-10-16 18:03:24.458 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 18:03:24.458 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.458 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 18:03:24.486 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.511 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.513 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:24.514 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:24.515 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 18:03:24.526 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 18:03:24.527 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 68.1116ms
[2023-10-16 18:03:24.527 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.527 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 18:03:24.527 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 68.8282ms
[2023-10-16 18:03:24.528 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 18:03:24.529 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.529 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 18:03:24.556 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.582 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 18:03:24.585 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 18:03:24.585 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 18:03:24.587 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 18:03:24.588 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 18:03:24.593 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 18:03:24.596 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.597 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.640 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 18:03:24.653 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.654 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.654 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.655 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 18:03:24.656 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 18:03:24.684 +07:00  INF]  Executed DbCommand (0ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 18:03:24.690 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 18:03:24.691 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 18:03:24.692 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 163.4135ms
[2023-10-16 18:03:24.692 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 18:03:24.692 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 163.8547ms
[2023-10-16 20:16:27.393 +07:00  INF]  User profile is available. Using 'C:\Users\Вадим\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 20:16:27.588 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 20:16:27.658 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 20:16:27.702 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:16:27.745 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:16:29.858 +07:00  INF]  Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:29.982 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:30.055 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:30.105 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:30.549 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 20:16:30.699 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:16:30.775 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 3017.5862ms
[2023-10-16 20:16:30.778 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:16:30.803 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 3219.5175ms
[2023-10-16 20:16:30.822 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 20:16:30.833 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:16:30.845 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:16:31.003 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:31.127 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:31.135 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:31.137 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:31.162 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 20:16:31.193 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:16:31.198 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 353.5944ms
[2023-10-16 20:16:31.199 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:16:31.200 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 378.1017ms
[2023-10-16 20:16:31.224 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 20:16:31.234 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:16:31.256 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:16:31.544 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:31.659 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:31.666 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:31.666 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:31.951 +07:00  INF]  Executed DbCommand (16ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 20:16:31.956 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 699.9745ms
[2023-10-16 20:16:31.957 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:16:31.961 +07:00  ERR]  Invalid banknotes type
[2023-10-16 20:16:31.980 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 756.0370ms
[2023-10-16 20:16:32.016 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 20:16:32.017 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:16:32.017 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:16:32.122 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:32.227 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:32.233 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:32.234 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:32.246 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 20:16:32.247 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__money_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = @__money_Nominal_0)
[2023-10-16 20:16:32.287 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 20:16:32.292 +07:00  ERR]  Failed executing DbCommand (1ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 20:16:32.309 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 20:16:32.312 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlOperationInProgressException (0x80004005): A command is already in progress: SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
   at Npgsql.Internal.NpgsqlConnector.<StartUserAction>g__DoStartUserAction|279_0(ConnectorState newState, NpgsqlCommand command, <>c__DisplayClass279_0&)
   at Npgsql.Internal.NpgsqlConnector.StartUserAction(ConnectorState newState, NpgsqlCommand command, CancellationToken cancellationToken, Boolean attemptPgCancellation)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 20:16:32.315 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 298.0351ms
[2023-10-16 20:16:32.315 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:16:32.316 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 20:16:32.317 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 300.6944ms
[2023-10-16 20:16:32.549 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 20:16:32.550 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:16:32.557 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:16:32.572 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 14.0506ms
[2023-10-16 20:16:32.572 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:16:32.573 +07:00  ERR]  User not found
[2023-10-16 20:16:32.573 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 23.6882ms
[2023-10-16 20:16:32.576 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 20:16:32.577 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:16:32.577 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:16:32.644 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 20:16:32.647 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 69.9589ms
[2023-10-16 20:16:32.647 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:16:32.648 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 71.3021ms
[2023-10-16 20:16:32.654 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 20:16:32.655 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:32.663 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:16:32.771 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:32.880 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:32.887 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:32.887 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:32.919 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:16:32.920 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 256.732ms
[2023-10-16 20:16:32.920 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:32.920 +07:00  ERR]  Invalid coffee type
[2023-10-16 20:16:32.921 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 266.5449ms
[2023-10-16 20:16:32.924 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 20:16:32.924 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:32.925 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:16:33.032 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:33.249 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:33.255 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:33.256 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:33.261 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:16:33.311 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:16:33.313 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 388.168ms
[2023-10-16 20:16:33.313 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:33.314 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 20:16:33.314 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 390.1744ms
[2023-10-16 20:16:33.318 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 20:16:33.319 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:33.319 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:16:33.426 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:33.532 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:16:33.537 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:16:33.537 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:16:33.546 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:16:33.548 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:16:33.564 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 20:16:33.575 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.578 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.718 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 20:16:33.762 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.764 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.766 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.768 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:16:33.773 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 20:16:33.798 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:16:33.819 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 20:16:33.822 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 20:16:33.827 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 507.8364ms
[2023-10-16 20:16:33.827 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:16:33.828 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 509.5425ms
[2023-10-16 20:45:20.098 +07:00  INF]  User profile is available. Using 'C:\Users\Вадим\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 20:45:20.316 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 20:45:20.387 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 20:45:20.424 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:45:20.473 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:45:22.502 +07:00  INF]  Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:45:22.617 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:45:22.673 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:45:22.722 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:45:23.341 +07:00  INF]  Executed DbCommand (27ms) [Parameters=[@__moneyList_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = ANY (@__moneyList_0))
[2023-10-16 20:45:23.509 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[@__banknote_Nominal_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Nominal_0
LIMIT 1
[2023-10-16 20:45:23.542 +07:00  ERR]  An exception occurred while iterating over the results of a query for context type 'CoffeeMachine.Models.Data.CoffeeContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2023-10-16 20:45:23.620 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 3138.0857ms
[2023-10-16 20:45:23.622 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:45:23.628 +07:00  ERR]  A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
[2023-10-16 20:45:23.681 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 404 - application/json;+charset=utf-8 3370.3459ms
[2023-10-16 20:52:24.354 +07:00  INF]  User profile is available. Using 'C:\Users\Вадим\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 20:52:24.534 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 20:52:24.595 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 20:52:24.634 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:52:24.689 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:52:26.827 +07:00  INF]  Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:26.949 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:27.020 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:27.067 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:27.492 +07:00  INF]  Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 20:52:27.622 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:52:27.683 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 2985.1394ms
[2023-10-16 20:52:27.685 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:52:27.707 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 3177.2514ms
[2023-10-16 20:52:27.724 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 20:52:27.735 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:52:27.744 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:52:27.989 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:28.100 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:28.107 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:28.109 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:28.130 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 20:52:28.156 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:52:28.161 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 417.2509ms
[2023-10-16 20:52:28.162 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:52:28.163 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 438.9393ms
[2023-10-16 20:52:28.177 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 20:52:28.187 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:52:28.206 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:52:28.466 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:28.589 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:28.595 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:28.596 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:28.929 +07:00  INF]  Executed DbCommand (25ms) [Parameters=[@__moneyList_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = ANY (@__moneyList_0))
[2023-10-16 20:52:28.934 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 728.5505ms
[2023-10-16 20:52:28.935 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:52:28.939 +07:00  ERR]  Invalid banknotes type
[2023-10-16 20:52:28.955 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 778.3044ms
[2023-10-16 20:52:28.961 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 20:52:28.962 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:52:28.962 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:52:29.068 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:29.174 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:29.182 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:29.183 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:29.195 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__moneyList_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = ANY (@__moneyList_0))
[2023-10-16 20:52:29.264 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@__banknote_Key_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Key_0
LIMIT 1
[2023-10-16 20:52:29.277 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Key_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Key_0
LIMIT 1
[2023-10-16 20:52:29.436 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 20:52:29.476 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 20:52:29.479 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 517.2434ms
[2023-10-16 20:52:29.480 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:52:29.480 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 519.0895ms
[2023-10-16 20:52:29.487 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 20:52:29.488 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:52:29.496 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:52:29.506 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 10.2999ms
[2023-10-16 20:52:29.506 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:52:29.507 +07:00  ERR]  User not found
[2023-10-16 20:52:29.508 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 20.3502ms
[2023-10-16 20:52:29.511 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 20:52:29.511 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:52:29.511 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:52:29.574 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 20:52:29.574 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 62.4781ms
[2023-10-16 20:52:29.574 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:52:29.575 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 63.7754ms
[2023-10-16 20:52:29.582 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 20:52:29.582 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:29.590 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:52:29.700 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:29.806 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:29.812 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:29.813 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:29.839 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:52:29.840 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 249.8078ms
[2023-10-16 20:52:29.840 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:29.841 +07:00  ERR]  Invalid coffee type
[2023-10-16 20:52:29.841 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 259.5608ms
[2023-10-16 20:52:29.844 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 20:52:29.845 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:29.845 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:52:30.063 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:30.271 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:30.276 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:30.277 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:30.282 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:52:30.313 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:52:30.315 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 469.9011ms
[2023-10-16 20:52:30.315 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:30.316 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 20:52:30.316 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 471.7618ms
[2023-10-16 20:52:30.320 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 20:52:30.320 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:30.321 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:52:30.530 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:30.637 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:52:30.645 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:52:30.645 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:52:30.653 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:52:30.655 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:52:30.671 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 20:52:30.682 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.685 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.689 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 20:52:30.696 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.698 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.699 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.701 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:52:30.705 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 20:52:30.717 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:52:30.736 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 20:52:30.739 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 20:52:30.742 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 421.4716ms
[2023-10-16 20:52:30.743 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:52:30.743 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 422.8470ms
[2023-10-16 20:57:54.533 +07:00  INF]  User profile is available. Using 'C:\Users\Вадим\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-10-16 20:57:54.704 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/coffeebalance - -
[2023-10-16 20:57:54.764 +07:00  WRN]  Failed to determine the https port for redirect.
[2023-10-16 20:57:54.805 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:57:54.848 +07:00  INF]  Route matched with {action = "GetCoffeeBalance", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCoffeeBalanceAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:57:56.925 +07:00  INF]  Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:57.044 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:57.119 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:57:57.168 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:57:57.589 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
[2023-10-16 20:57:57.725 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.BalanceCoffeeDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:57:57.788 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine) in 2931.0259ms
[2023-10-16 20:57:57.790 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetCoffeeBalanceAsync (CoffeeMachine)'
[2023-10-16 20:57:57.813 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/coffeebalance - - - 200 - application/json;+charset=utf-8 3113.7421ms
[2023-10-16 20:57:57.830 +07:00  INF]  Request starting HTTP/1.1 GET http://localhost/api/moneyinmachine/ - -
[2023-10-16 20:57:57.841 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:57:57.850 +07:00  INF]  Route matched with {action = "GetMoneyInMachine", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMoneyInMachineAsync() on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:57:58.104 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:58.318 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:58.325 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:57:58.327 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:57:58.348 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
[2023-10-16 20:57:58.376 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CoffeeMachine.Dto.MoneyDto, CoffeeMachine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2023-10-16 20:57:58.380 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine) in 529.7507ms
[2023-10-16 20:57:58.381 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.GetMoneyInMachineAsync (CoffeeMachine)'
[2023-10-16 20:57:58.382 +07:00  INF]  Request finished HTTP/1.1 GET http://localhost/api/moneyinmachine/ - - - 200 - application/json;+charset=utf-8 552.3618ms
[2023-10-16 20:57:58.395 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27
[2023-10-16 20:57:58.407 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:57:58.426 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:57:58.701 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:58.818 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:58.826 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:57:58.827 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:57:59.153 +07:00  INF]  Executed DbCommand (25ms) [Parameters=[@__moneyList_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = ANY (@__moneyList_0))
[2023-10-16 20:57:59.158 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 731.582ms
[2023-10-16 20:57:59.159 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:57:59.163 +07:00  ERR]  Invalid banknotes type
[2023-10-16 20:57:59.180 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 27 - 400 - application/json;+charset=utf-8 785.1061ms
[2023-10-16 20:57:59.186 +07:00  INF]  Request starting HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54
[2023-10-16 20:57:59.187 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:57:59.187 +07:00  INF]  Route matched with {action = "InputMoney", controller = "CoffeeMachineAdministrator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] InputMoneyAsync(System.Collections.Generic.List`1[CoffeeMachine.Dto.MoneyDto]) on controller CoffeeMachine.Controllers.CoffeeMachineAdministratorController (CoffeeMachine).
[2023-10-16 20:57:59.404 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:59.509 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:57:59.514 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:57:59.514 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:57:59.526 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__moneyList_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "MoneyInMachinesDb" AS m
    WHERE m."Nominal" = ANY (@__moneyList_0))
[2023-10-16 20:57:59.600 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__banknote_Key_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Key_0
LIMIT 1
[2023-10-16 20:57:59.613 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__banknote_Key_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__banknote_Key_0
LIMIT 1
[2023-10-16 20:57:59.772 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 20:57:59.829 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 20:57:59.832 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine) in 644.3856ms
[2023-10-16 20:57:59.832 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineAdministratorController.InputMoneyAsync (CoffeeMachine)'
[2023-10-16 20:57:59.833 +07:00  INF]  Request finished HTTP/1.1 PUT http://localhost/api/inputing application/json;+charset=utf-8 54 - 200 - text/plain;+charset=utf-8 646.4122ms
[2023-10-16 20:57:59.843 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43
[2023-10-16 20:57:59.844 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:57:59.852 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:57:59.865 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 12.7996ms
[2023-10-16 20:57:59.865 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:57:59.866 +07:00  ERR]  User not found
[2023-10-16 20:57:59.867 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 43 - 404 - application/json;+charset=utf-8 23.7749ms
[2023-10-16 20:57:59.870 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39
[2023-10-16 20:57:59.870 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:57:59.871 +07:00  INF]  Route matched with {action = "Login", controller = "CoffeeMachineLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(UserModel) on controller CoffeeMachine.Controllers.CoffeeMachineLoginController (CoffeeMachine).
[2023-10-16 20:57:59.942 +07:00  INF]  Executing OkObjectResult, writing value of type 'System.String'.
[2023-10-16 20:57:59.943 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine) in 72.3201ms
[2023-10-16 20:57:59.943 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineLoginController.Login (CoffeeMachine)'
[2023-10-16 20:57:59.944 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/login application/json;+charset=utf-8 39 - 200 - text/plain;+charset=utf-8 73.5395ms
[2023-10-16 20:57:59.950 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10
[2023-10-16 20:57:59.951 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:57:59.959 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:58:00.174 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.284 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.289 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:58:00.290 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:58:00.317 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:58:00.319 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 359.0924ms
[2023-10-16 20:58:00.319 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:58:00.320 +07:00  ERR]  Invalid coffee type
[2023-10-16 20:58:00.320 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/InvalidCoffeeName application/json;+charset=utf-8 10 - 400 - application/json;+charset=utf-8 369.9072ms
[2023-10-16 20:58:00.323 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5
[2023-10-16 20:58:00.324 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:58:00.324 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:58:00.529 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.643 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.648 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:58:00.649 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:58:00.654 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:58:00.687 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:58:00.689 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 364.7233ms
[2023-10-16 20:58:00.689 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:58:00.689 +07:00  ERR]  The amount deposited is less than required
[2023-10-16 20:58:00.690 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 5 - 400 - application/json;+charset=utf-8 366.7310ms
[2023-10-16 20:58:00.694 +07:00  INF]  Request starting HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10
[2023-10-16 20:58:00.695 +07:00  INF]  Executing endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:58:00.695 +07:00  INF]  Route matched with {action = "PlaceOrder", controller = "CoffeeMachineBuy"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CoffeeMachine.Dto.OrderCoffeeDto]] PlaceOrder(System.String, UInt32[]) on controller CoffeeMachine.Controllers.CoffeeMachineBuyController (CoffeeMachine).
[2023-10-16 20:58:00.805 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.920 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
[2023-10-16 20:58:00.925 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2023-10-16 20:58:00.926 +07:00  INF]  No migrations were applied. The database is already up to date.
[2023-10-16 20:58:00.935 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CoffeesDb" AS c
    WHERE c."Name" = @__coffeeType_0)
[2023-10-16 20:58:00.938 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:58:00.954 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
ORDER BY m."Nominal" DESC
[2023-10-16 20:58:00.964 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.967 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.971 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
[2023-10-16 20:58:00.988 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.990 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.992 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.994 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__note_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Nominal", m."Count"
FROM "MoneyInMachinesDb" AS m
WHERE m."Nominal" = @__note_0
LIMIT 1
[2023-10-16 20:58:00.997 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Int64), @p3='?' (DbType = Int64), @p2='?' (DbType = Int64), @p5='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MoneyInMachinesDb" SET "Count" = @p0
WHERE "Nominal" = @p1;
UPDATE "MoneyInMachinesDb" SET "Count" = @p2
WHERE "Nominal" = @p3;
UPDATE "MoneyInMachinesDb" SET "Count" = @p4
WHERE "Nominal" = @p5;
[2023-10-16 20:58:01.010 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__coffeeType_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Balance", c."Name", c."Price"
FROM "CoffeesDb" AS c
WHERE c."Name" = @__coffeeType_0
LIMIT 1
[2023-10-16 20:58:01.030 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CoffeesDb" SET "Balance" = @p0
WHERE "Id" = @p1;
[2023-10-16 20:58:01.034 +07:00  INF]  Executing OkObjectResult, writing value of type 'CoffeeMachine.Dto.OrderCoffeeDto'.
[2023-10-16 20:58:01.038 +07:00  INF]  Executed action CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine) in 342.6827ms
[2023-10-16 20:58:01.038 +07:00  INF]  Executed endpoint 'CoffeeMachine.Controllers.CoffeeMachineBuyController.PlaceOrder (CoffeeMachine)'
[2023-10-16 20:58:01.038 +07:00  INF]  Request finished HTTP/1.1 POST http://localhost/api/order/Cappuccino application/json;+charset=utf-8 10 - 200 - application/json;+charset=utf-8 344.1134ms
